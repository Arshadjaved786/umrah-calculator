{"ast":null,"code":"import _objectSpread from\"C:/Users/Taj Tech/Downloads/umrah-calculator/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/SavedPackages.jsx\nimport React,{useState,useRef}from\"react\";import{exportPdf}from\"../services/pdfService\";import Footer from\"./Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function addDaysIso(iso,n){if(!iso)return\"\";const[y,m,d]=iso.split(\"-\").map(Number);const dt=new Date(y,m-1,d);dt.setDate(dt.getDate()+n);const yyyy=dt.getFullYear();const mm=String(dt.getMonth()+1).padStart(2,\"0\");const dd=String(dt.getDate()).padStart(2,\"0\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}const sumCity=(segs,city)=>segs.filter(s=>s.type===\"stay\"&&s.city===city).reduce((a,s)=>a+Number(s.countedDays||0),0);const sumWeekend=(segs,city)=>segs.filter(s=>s.type===\"stay\"&&s.city===city).reduce((a,s)=>a+(Array.isArray(s.weekendDates)?s.weekendDates.length:0),0);/**\r\n * SavedPackages\r\n *\r\n * Props:\r\n * - packages: array of saved package snapshots\r\n * - setPackages: setter to update packages (delete etc.)\r\n *\r\n * Features:\r\n * - List packages (compact)\r\n * - Show / Hide Details per package (in-list)\r\n * - Preview modal (full package) with Export PDF button\r\n * - Delete package (with confirm)\r\n *\r\n * Simple, readable UI using Tailwind (matches app style)\r\n */function fmtSAR(n){try{return Number(n||0).toLocaleString();}catch(_unused){return n;}}export default function SavedPackages(_ref){var _previewPkg$agency,_previewPkg$agency2,_previewPkg$agency3,_previewPkg$agency4,_previewPkg$itinerary,_previewPkg$totals,_previewPkg$totals2,_previewPkg$totals3,_previewPkg$perPerson,_previewPkg$totals4,_previewPkg$totals5,_previewPkg$totals6,_previewPkg$totals7,_previewPkg$totals8,_previewPkg$totals9,_previewPkg$totals0,_previewPkg$itinerary2,_previewPkg$hotelsSel,_previewPkg$hotelsSel2,_previewPkg$hotelsSel3,_previewPkg$hotelsSel4,_previewPkg$hotelsSel5,_previewPkg$hotelsSel6,_previewPkg$hotelsSel7,_previewPkg$hotelsSel8,_previewPkg$hotelsSel9,_previewPkg$hotelsSel0,_previewPkg$transport,_previewPkg$visa,_previewPkg$visa2,_previewPkg$flights,_previewPkg$flights$s,_previewPkg$flights2,_previewPkg$flights2$,_previewPkg$selectedA,_previewPkg$flights3;let{packages=[],setPackages}=_ref;console.log(\"üì¶ SavedPackages packages prop\",packages);const[expanded,setExpanded]=useState({});// { [id]: true }\nconst[previewPkg,setPreviewPkg]=useState(null);// package being previewed\nconst previewRef=useRef(null);const[exporting,setExporting]=useState(false);function toggleExpand(id){setExpanded(s=>_objectSpread(_objectSpread({},s),{},{[id]:!s[id]}));}function handleDelete(id){if(!confirm(\"Are you sure you want to delete this package?\"))return;const next=(packages||[]).filter(p=>p.id!==id);setPackages(next);}function openPreview(pkg){setPreviewPkg(pkg);// small delay to let modal render before any further action (not required but safe)\nsetTimeout(()=>{if(previewRef.current){// noop\n}},50);}async function handleExportPdf(pkg){if(!previewRef.current){alert(\"Preview not ready for export.\");return;}try{setExporting(true);const fileName=\"\".concat(pkg.id||\"package\",\".pdf\");await exportPdf(previewRef.current,fileName,{format:\"a4\",scale:2});setExporting(false);}catch(err){console.error(\"Export PDF failed:\",err);setExporting(false);alert(\"Export failed. See console for details.\");}}async function handlePrint(pkg){// ensure preview DOM exists; if not, open preview then retry\nif(!previewRef.current){openPreview(pkg);// wait a short moment for modal to render then retry\nsetTimeout(()=>{handlePrint(pkg);},300);return;}try{const blob=await exportPdf(previewRef.current,\"\".concat(pkg.id||\"package\",\".pdf\"),{format:\"a4\",scale:3,forceSinglePage:true,skipSave:true});const url=URL.createObjectURL(blob);const w=window.open(url,\"_blank\");if(!w){alert(\"Popup blocked ‚Äî allow popups.\");return;}w.focus();setTimeout(()=>{try{w.print();}catch(_unused2){}},600);}catch(err){console.error(\"Print failed\",err);alert(\"Print failed.\");}}// Render a compact itinerary snippet (safe fallback)\nfunction renderItinerarySnippet(itinerary){if(!itinerary)return/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"No itinerary\"});// Use segments or adjustedSegments\nconst segs=itinerary.adjustedSegments||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700 space-y-1\",children:[segs.slice(0,4).map((s,idx)=>{var _s$date;if(s.type===\"travel\")return/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[\"Travel: \",((_s$date=s.date)===null||_s$date===void 0?void 0:_s$date.human)||s.date||s.iso]},idx);return/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"capitalize\",children:s.city}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"\\u2014 \",s.countedDays,\" nights\"]})]},idx);}),segs.length>4&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"...more\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 space-y-4 max-w-4xl mx-auto px-3\",children:[(!packages||packages.length===0)&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-sm\",children:\"No packages saved yet.\"}),(packages||[]).map(pkg=>{var _pkg$itinerary,_pkg$totals,_pkg$totals2,_pkg$totals3,_pkg$perPersonTotal,_pkg$totals4,_pkg$totals5,_pkg$totals6,_pkg$totals7,_pkg$totals8,_pkg$totals9,_pkg$totals0,_pkg$hotelsSelected,_pkg$hotelsSelected$m,_pkg$itinerary2,_pkg$hotelsSelected2,_pkg$hotelsSelected2$,_pkg$itinerary3,_pkg$itinerary4,_pkg$transport,_pkg$flights,_pkg$flights$selected,_pkg$flights2,_pkg$flights2$airline,_pkg$selectedAirline,_pkg$flights3;return/*#__PURE__*/_jsx(\"div\",{className:\"\\r p-4 rounded-xl\\r bg-gradient-to-r from-indigo-50 via-white to-sky-50\\r border border-indigo-100\\r shadow-sm\\r flex flex-col md:flex-row md:items-center md:justify-between\\r gap-3 w-full max-w-full overflow-hidden\\r text-center\\r \",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-sm\",children:[Number((_pkg$itinerary=pkg.itinerary)!==null&&_pkg$itinerary!==void 0&&_pkg$itinerary.adjustedStays?pkg.itinerary.adjustedStays.reduce((sum,s)=>sum+Number(s.countedDays||0),0):0),\" \",\"Days Package \\u2014\",\" \",pkg.createdAt?new Date(pkg.createdAt).toLocaleString():pkg.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-xs mt-2 px-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1 font-medium flex flex-col sm:flex-row flex-wrap sm:items-center sm:justify-center gap-1 sm:gap-4\",children:[\"Per Person:\",/*#__PURE__*/_jsxs(\"span\",{className:\"ml-3 font-bold\",children:[\"PKR\",\" \",fmtSAR(pkg.perPersonTotal?Math.round(Number(pkg.perPersonTotal)*(((_pkg$totals=pkg.totals)===null||_pkg$totals===void 0?void 0:_pkg$totals.PKR)||0)/(((_pkg$totals2=pkg.totals)===null||_pkg$totals2===void 0?void 0:_pkg$totals2.SAR)||Number(pkg.perPersonTotal)||1)):(_pkg$totals3=pkg.totals)!==null&&_pkg$totals3!==void 0&&_pkg$totals3.PKR?Math.round(pkg.totals.PKR/Math.max(1,pkg.pax||1)):0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-4\",children:[\"SAR\",\" \",fmtSAR((_pkg$perPersonTotal=pkg.perPersonTotal)!==null&&_pkg$perPersonTotal!==void 0?_pkg$perPersonTotal:(_pkg$totals4=pkg.totals)!==null&&_pkg$totals4!==void 0&&_pkg$totals4.SAR?Math.round(pkg.totals.SAR/Math.max(1,pkg.pax||1)):0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-4\",children:[\"USD\",\" \",(pkg.perPersonTotal?Number(pkg.perPersonTotal)*Number(((_pkg$totals5=pkg.totals)===null||_pkg$totals5===void 0?void 0:_pkg$totals5.USD)||0)/Number(((_pkg$totals6=pkg.totals)===null||_pkg$totals6===void 0?void 0:_pkg$totals6.SAR)||Number(pkg.perPersonTotal)||1):Number(((_pkg$totals7=pkg.totals)===null||_pkg$totals7===void 0?void 0:_pkg$totals7.USD)||0)/Math.max(1,pkg.pax||1)).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 font-medium flex flex-col sm:flex-row sm:items-center sm:justify-center gap-1 sm:gap-0\",children:[\"Pax \",pkg.pax||1,\" \\xA0\\xA0 | \\xA0\\xA0 Totals:\",/*#__PURE__*/_jsxs(\"span\",{className:\"ml-3 font-bold\",children:[\"PKR \",fmtSAR(((_pkg$totals8=pkg.totals)===null||_pkg$totals8===void 0?void 0:_pkg$totals8.PKR)||0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-4\",children:[\"SAR \",fmtSAR(((_pkg$totals9=pkg.totals)===null||_pkg$totals9===void 0?void 0:_pkg$totals9.SAR)||0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-4\",children:[\"USD \",(((_pkg$totals0=pkg.totals)===null||_pkg$totals0===void 0?void 0:_pkg$totals0.USD)||0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleExpand(pkg.id),className:\"text-xs text-indigo-600 hover:underline\",type:\"button\",children:expanded[pkg.id]?\"Hide details\":\"Show details\"}),expanded[pkg.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-3 bg-gray-50 rounded text-sm text-gray-700 space-y-4\",children:[pkg.agency&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Agency\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-extrabold text-center bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent\",children:pkg.agency.name||\"No name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:pkg.agency.email||\"\"}),pkg.agency.address&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:pkg.agency.address})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-extrabold text-indigo-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83C\\uDFE8\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Hotels\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4 mt-3 bg-gradient-to-r from-gray-50 via-white to-gray-50 p-3 rounded-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\\r p-3 rounded-xl\\r bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50\\r border border-amber-200\\r shadow-sm\\r text-center\\r \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDD4B\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Makkah\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_pkg$hotelsSelected=pkg.hotelsSelected)===null||_pkg$hotelsSelected===void 0?void 0:(_pkg$hotelsSelected$m=_pkg$hotelsSelected.makkah)===null||_pkg$hotelsSelected$m===void 0?void 0:_pkg$hotelsSelected$m.name)||\"-\"}),((_pkg$itinerary2=pkg.itinerary)===null||_pkg$itinerary2===void 0?void 0:_pkg$itinerary2.adjustedSegments)&&(()=>{const segs=pkg.itinerary.adjustedSegments;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[\"Nights: \",sumCity(segs,\"makkah\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[\"Weekend nights:\",\" \",sumWeekend(segs,\"makkah\")]})]});})()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\\r p-3 rounded-xl\\r bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50\\r border border-emerald-200\\r shadow-sm\\r text-center\\r \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDD4C\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Madinah\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_pkg$hotelsSelected2=pkg.hotelsSelected)===null||_pkg$hotelsSelected2===void 0?void 0:(_pkg$hotelsSelected2$=_pkg$hotelsSelected2.madinah)===null||_pkg$hotelsSelected2$===void 0?void 0:_pkg$hotelsSelected2$.name)||\"-\"}),((_pkg$itinerary3=pkg.itinerary)===null||_pkg$itinerary3===void 0?void 0:_pkg$itinerary3.adjustedSegments)&&(()=>{const segs=pkg.itinerary.adjustedSegments;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[\"Nights: \",sumCity(segs,\"madinah\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[\"Weekend nights:\",\" \",sumWeekend(segs,\"madinah\")]})]});})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 mb-2 text-sm font-extrabold text-indigo-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Itinerary\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-3\",children:(((_pkg$itinerary4=pkg.itinerary)===null||_pkg$itinerary4===void 0?void 0:_pkg$itinerary4.adjustedSegments)||[]).map((s,i)=>{var _s$countedDays,_s$weekendDates;// Travel Segment\nif(s.type===\"travel\"){var _s$date2;return/*#__PURE__*/_jsxs(\"div\",{className:\"\\r p-3 rounded-xl\\r bg-gradient-to-r from-sky-100 via-cyan-100 to-emerald-100\\r border border-cyan-200\\r text-sm\\r text-center\\r shadow-sm\\r \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:\"Travel Day\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-700\",children:((_s$date2=s.date)===null||_s$date2===void 0?void 0:_s$date2.human)||s.date||s.iso})]},i);}// Stay Segment\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold capitalize\",children:s.city})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-right text-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Check-in:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:s.countedCheckInIso||\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Check-out:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:s.countedLastNightIso?addDaysIso(s.countedLastNightIso,1):\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-gray-600\",children:[\"Nights (counted): \",(_s$countedDays=s.countedDays)!==null&&_s$countedDays!==void 0?_s$countedDays:\"-\"]})]})]}),(s.countedCheckInIso||s.countedLastNightIso)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 bg-gray-50 p-2 rounded border text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Counted check-in:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:s.countedCheckInIso||\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Counted last-night:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:s.countedLastNightIso||\"-\"})]}),((_s$weekendDates=s.weekendDates)===null||_s$weekendDates===void 0?void 0:_s$weekendDates.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-gray-600\",children:[\"Weekend nights:\",\" \",s.weekendDates.join(\", \")]})]})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-indigo-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83D\\uDE8C\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Transport\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_pkg$transport=pkg.transport)===null||_pkg$transport===void 0?void 0:_pkg$transport.vehicle)||pkg.vehicle||\"‚Äî\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Selected vehicle\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83D\\uDEC2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Visa\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"e-visa\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\u2708\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ticket\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_pkg$flights=pkg.flights)===null||_pkg$flights===void 0?void 0:(_pkg$flights$selected=_pkg$flights.selectedAirline)===null||_pkg$flights$selected===void 0?void 0:_pkg$flights$selected.name)||((_pkg$flights2=pkg.flights)===null||_pkg$flights2===void 0?void 0:(_pkg$flights2$airline=_pkg$flights2.airline)===null||_pkg$flights2$airline===void 0?void 0:_pkg$flights2$airline.name)||((_pkg$selectedAirline=pkg.selectedAirline)===null||_pkg$selectedAirline===void 0?void 0:_pkg$selectedAirline.name)||((_pkg$flights3=pkg.flights)===null||_pkg$flights3===void 0?void 0:_pkg$flights3.airline)||\"‚Äî\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Selected airline\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center flex-wrap gap-3 mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openPreview(pkg),className:\"\\r px-4 py-2 text-sm rounded-lg\\r bg-gradient-to-r from-indigo-600 to-blue-600\\r text-white shadow hover:opacity-95\\r w-full sm:w-auto\\r\\n\",children:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// export quick PDF using a small inline preview creation\nopenPreview(pkg);// wait a moment and then export (modal will open)\nsetTimeout(()=>{if(previewRef.current){handleExportPdf(pkg);}else{// fallback: try once more later\nsetTimeout(()=>{if(previewRef.current)handleExportPdf(pkg);},200);}},250);},className:\"\\r px-4 py-2 text-sm rounded-lg\\r bg-gradient-to-r from-emerald-600 to-teal-600\\r text-white shadow hover:opacity-95\\r w-full sm:w-auto\\r\\n\",children:\"Export PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(pkg.id),className:\"\\r px-4 py-2 text-sm rounded-lg\\r bg-gradient-to-r from-rose-600 to-red-600\\r text-white shadow hover:opacity-95\\r w-full sm:w-auto\\r\\n\",children:\"Delete\"})]})]})})},pkg.id);}),previewPkg&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-start justify-center p-6 bg-black/40\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white max-w-4xl w-full mx-auto rounded shadow-lg overflow-auto px-2 sm:px-0\",style:{maxHeight:\"90vh\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\\r flex items-center justify-between p-4\\r bg-gradient-to-r from-indigo-600 via-blue-600 to-teal-600\\r text-white\\r \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold tracking-wide\",children:\"Package Preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExportPdf(previewPkg),disabled:exporting,className:\"px-4 py-1.5 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg text-sm font-semibold shadow hover:opacity-90\",children:exporting?\"Exporting...\":\"Export PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePrint(previewPkg),className:\"px-4 py-1.5 bg-gradient-to-r from-sky-600 to-blue-600 text-white rounded-lg text-sm font-semibold shadow hover:opacity-90\",children:\"Print\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPreviewPkg(null),className:\"px-4 py-1.5 bg-white text-gray-700 border border-gray-300 rounded-lg text-sm font-medium shadow hover:bg-gray-50\",children:\"Close\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",ref:previewRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded flex items-center justify-center overflow-hidden bg-white border\",children:(_previewPkg$agency=previewPkg.agency)!==null&&_previewPkg$agency!==void 0&&_previewPkg$agency.logo?/*#__PURE__*/_jsx(\"img\",{src:previewPkg.agency.logo,alt:\"Agency Logo\",className:\"w-full h-full object-contain\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:\"Logo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\\r text-2xl font-extrabold text-center\\r bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600\\r bg-clip-text text-transparent\\r \",children:((_previewPkg$agency2=previewPkg.agency)===null||_previewPkg$agency2===void 0?void 0:_previewPkg$agency2.name)||\"Agency\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 mt-1\",children:[((_previewPkg$agency3=previewPkg.agency)===null||_previewPkg$agency3===void 0?void 0:_previewPkg$agency3.email)||\"\",(_previewPkg$agency4=previewPkg.agency)!==null&&_previewPkg$agency4!==void 0&&_previewPkg$agency4.phone?\" \\u2022 \".concat(previewPkg.agency.phone):\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-right text-gray-600\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Created:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-xs\",children:previewPkg.createdAt?new Date(previewPkg.createdAt).toLocaleDateString():\"-\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\\r mt-8 p-6\\r rounded-2xl\\r bg-gradient-to-br from-indigo-50 via-white to-sky-50\\r border border-indigo-200\\r shadow-md\\r \",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-center text-xl font-extrabold text-indigo-700 mb-4 tracking-wide\",children:[Number((_previewPkg$itinerary=previewPkg.itinerary)!==null&&_previewPkg$itinerary!==void 0&&_previewPkg$itinerary.adjustedStays?previewPkg.itinerary.adjustedStays.reduce((sum,s)=>sum+Number(s.countedDays||0),0):0),\" \",\"Days Package Summary\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-[820px] mx-auto text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Per Person\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex flex-col sm:flex-row sm:items-baseline justify-center gap-2 sm:gap-6\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-extrabold text-gray-900\",children:[\"PKR\",\" \",fmtSAR(previewPkg.perPersonTotal?Math.round(Number(previewPkg.perPersonTotal)*(((_previewPkg$totals=previewPkg.totals)===null||_previewPkg$totals===void 0?void 0:_previewPkg$totals.PKR)||0)/(((_previewPkg$totals2=previewPkg.totals)===null||_previewPkg$totals2===void 0?void 0:_previewPkg$totals2.SAR)||Number(previewPkg.perPersonTotal)||1)):(_previewPkg$totals3=previewPkg.totals)!==null&&_previewPkg$totals3!==void 0&&_previewPkg$totals3.PKR?Math.round(Number(previewPkg.totals.PKR)/Math.max(1,Number(previewPkg.pax||1))):0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg text-gray-700\",children:[\"SAR\",\" \",fmtSAR(Number((_previewPkg$perPerson=previewPkg.perPersonTotal)!==null&&_previewPkg$perPerson!==void 0?_previewPkg$perPerson:(_previewPkg$totals4=previewPkg.totals)!==null&&_previewPkg$totals4!==void 0&&_previewPkg$totals4.SAR?Math.round(Number(previewPkg.totals.SAR)/Math.max(1,Number(previewPkg.pax||1))):0))]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg text-gray-700\",children:[\"USD\",\" \",(previewPkg.perPersonTotal?Number(previewPkg.perPersonTotal)*Number(((_previewPkg$totals5=previewPkg.totals)===null||_previewPkg$totals5===void 0?void 0:_previewPkg$totals5.USD)||0)/Number(((_previewPkg$totals6=previewPkg.totals)===null||_previewPkg$totals6===void 0?void 0:_previewPkg$totals6.SAR)||Number(previewPkg.perPersonTotal)||1):Number(((_previewPkg$totals7=previewPkg.totals)===null||_previewPkg$totals7===void 0?void 0:_previewPkg$totals7.USD)||0)/Math.max(1,Number(previewPkg.pax||1))).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-12 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Pax\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium\",children:previewPkg.pax||1})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Totals\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex flex-col sm:flex-row sm:items-baseline justify-center gap-2 sm:gap-6\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-extrabold text-gray-900\",children:[\"PKR \",fmtSAR(((_previewPkg$totals8=previewPkg.totals)===null||_previewPkg$totals8===void 0?void 0:_previewPkg$totals8.PKR)||0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg text-gray-700\",children:[\"SAR \",fmtSAR(((_previewPkg$totals9=previewPkg.totals)===null||_previewPkg$totals9===void 0?void 0:_previewPkg$totals9.SAR)||0)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg text-gray-700\",children:[\"USD \",Number(((_previewPkg$totals0=previewPkg.totals)===null||_previewPkg$totals0===void 0?void 0:_previewPkg$totals0.USD)||0).toFixed(2)]})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3 text-lg font-extrabold text-center text-indigo-700 tracking-wide\",children:\"Itinerary\"}),(_previewPkg$itinerary2=previewPkg.itinerary)!==null&&_previewPkg$itinerary2!==void 0&&_previewPkg$itinerary2.adjustedSegments?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:previewPkg.itinerary.adjustedSegments.map((s,i)=>{if(s.type===\"travel\"){var _s$date3;return/*#__PURE__*/_jsxs(\"div\",{className:\"\\r p-3 rounded-xl\\r bg-gradient-to-r from-sky-100 via-cyan-100 to-emerald-100\\r border border-cyan-200\\r text-sm\\r text-center\\r shadow-sm\\r \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-extrabold text-emerald-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\uD83D\\uDE8C\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Travel Day\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-700 mt-1\",children:((_s$date3=s.date)===null||_s$date3===void 0?void 0:_s$date3.human)||s.date||s.iso})]},i);}// stay\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"font-extrabold capitalize text-center text-indigo-700\",children:s.city})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-center w-full mt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Check-in:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:s.countedCheckInIso||\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Check-out:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:s.countedLastNightIso?addDaysIso(s.countedLastNightIso,1):\"-\"})]})]})]}),s.weekendDates&&s.weekendDates.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 rounded-lg \\r bg-gradient-to-r from-indigo-50 via-blue-50 to-cyan-50 \\r border border-blue-200 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-xs\",children:\"Weekend nights:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-1 flex flex-wrap gap-2\",children:s.weekendDates.map(iso=>/*#__PURE__*/_jsx(\"div\",{className:\"px-2 py-1 bg-white rounded border text-xs\",children:iso},iso))})]})]},i);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"No itinerary data available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"flex items-center justify-center gap-2 mb-3 text-lg font-extrabold text-indigo-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83C\\uDFE8\"}),\"Hotels\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-xl \\r bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 \\r border border-amber-200 shadow-sm text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDD4B\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Makkah\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_previewPkg$hotelsSel=previewPkg.hotelsSelected)===null||_previewPkg$hotelsSel===void 0?void 0:(_previewPkg$hotelsSel2=_previewPkg$hotelsSel.makkah)===null||_previewPkg$hotelsSel2===void 0?void 0:_previewPkg$hotelsSel2.name)||\"-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700 mt-1\",children:[\"Nights: \",(_previewPkg$hotelsSel3=(_previewPkg$hotelsSel4=previewPkg.hotelsSelected)===null||_previewPkg$hotelsSel4===void 0?void 0:(_previewPkg$hotelsSel5=_previewPkg$hotelsSel4.makkah)===null||_previewPkg$hotelsSel5===void 0?void 0:_previewPkg$hotelsSel5.nights)!==null&&_previewPkg$hotelsSel3!==void 0?_previewPkg$hotelsSel3:\"-\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\\r p-3 rounded-xl\\r bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50\\r border border-emerald-200\\r shadow-sm\\r text-center\\r \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDD4C\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Madinah\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_previewPkg$hotelsSel6=previewPkg.hotelsSelected)===null||_previewPkg$hotelsSel6===void 0?void 0:(_previewPkg$hotelsSel7=_previewPkg$hotelsSel6.madinah)===null||_previewPkg$hotelsSel7===void 0?void 0:_previewPkg$hotelsSel7.name)||\"-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700 mt-1\",children:[\"Nights:\",\" \",(_previewPkg$hotelsSel8=(_previewPkg$hotelsSel9=previewPkg.hotelsSelected)===null||_previewPkg$hotelsSel9===void 0?void 0:(_previewPkg$hotelsSel0=_previewPkg$hotelsSel9.madinah)===null||_previewPkg$hotelsSel0===void 0?void 0:_previewPkg$hotelsSel0.nights)!==null&&_previewPkg$hotelsSel8!==void 0?_previewPkg$hotelsSel8:\"-\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid md:grid-cols-3 gap-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-indigo-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83D\\uDE8C\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Transport\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_previewPkg$transport=previewPkg.transport)===null||_previewPkg$transport===void 0?void 0:_previewPkg$transport.vehicle)||previewPkg.vehicle||\"‚Äî\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83D\\uDEC2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Visa\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_previewPkg$visa=previewPkg.visa)===null||_previewPkg$visa===void 0?void 0:_previewPkg$visa.type)||((_previewPkg$visa2=previewPkg.visa)===null||_previewPkg$visa2===void 0?void 0:_previewPkg$visa2.visaType)||\"e-visa\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\u2708\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ticket\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:((_previewPkg$flights=previewPkg.flights)===null||_previewPkg$flights===void 0?void 0:(_previewPkg$flights$s=_previewPkg$flights.selectedAirline)===null||_previewPkg$flights$s===void 0?void 0:_previewPkg$flights$s.name)||((_previewPkg$flights2=previewPkg.flights)===null||_previewPkg$flights2===void 0?void 0:(_previewPkg$flights2$=_previewPkg$flights2.airline)===null||_previewPkg$flights2$===void 0?void 0:_previewPkg$flights2$.name)||((_previewPkg$selectedA=previewPkg.selectedAirline)===null||_previewPkg$selectedA===void 0?void 0:_previewPkg$selectedA.name)||((_previewPkg$flights3=previewPkg.flights)===null||_previewPkg$flights3===void 0?void 0:_previewPkg$flights3.airline)||\"‚Äî\"})]})]}),/*#__PURE__*/_jsx(Footer,{})]})]})})]});}","map":{"version":3,"names":["React","useState","useRef","exportPdf","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","addDaysIso","iso","n","y","m","d","split","map","Number","dt","Date","setDate","getDate","yyyy","getFullYear","mm","String","getMonth","padStart","dd","concat","sumCity","segs","city","filter","s","type","reduce","a","countedDays","sumWeekend","Array","isArray","weekendDates","length","fmtSAR","toLocaleString","_unused","SavedPackages","_ref","_previewPkg$agency","_previewPkg$agency2","_previewPkg$agency3","_previewPkg$agency4","_previewPkg$itinerary","_previewPkg$totals","_previewPkg$totals2","_previewPkg$totals3","_previewPkg$perPerson","_previewPkg$totals4","_previewPkg$totals5","_previewPkg$totals6","_previewPkg$totals7","_previewPkg$totals8","_previewPkg$totals9","_previewPkg$totals0","_previewPkg$itinerary2","_previewPkg$hotelsSel","_previewPkg$hotelsSel2","_previewPkg$hotelsSel3","_previewPkg$hotelsSel4","_previewPkg$hotelsSel5","_previewPkg$hotelsSel6","_previewPkg$hotelsSel7","_previewPkg$hotelsSel8","_previewPkg$hotelsSel9","_previewPkg$hotelsSel0","_previewPkg$transport","_previewPkg$visa","_previewPkg$visa2","_previewPkg$flights","_previewPkg$flights$s","_previewPkg$flights2","_previewPkg$flights2$","_previewPkg$selectedA","_previewPkg$flights3","packages","setPackages","console","log","expanded","setExpanded","previewPkg","setPreviewPkg","previewRef","exporting","setExporting","toggleExpand","id","_objectSpread","handleDelete","confirm","next","p","openPreview","pkg","setTimeout","current","handleExportPdf","alert","fileName","format","scale","err","error","handlePrint","blob","forceSinglePage","skipSave","url","URL","createObjectURL","w","window","open","focus","print","_unused2","renderItinerarySnippet","itinerary","className","children","adjustedSegments","slice","idx","_s$date","date","human","_pkg$itinerary","_pkg$totals","_pkg$totals2","_pkg$totals3","_pkg$perPersonTotal","_pkg$totals4","_pkg$totals5","_pkg$totals6","_pkg$totals7","_pkg$totals8","_pkg$totals9","_pkg$totals0","_pkg$hotelsSelected","_pkg$hotelsSelected$m","_pkg$itinerary2","_pkg$hotelsSelected2","_pkg$hotelsSelected2$","_pkg$itinerary3","_pkg$itinerary4","_pkg$transport","_pkg$flights","_pkg$flights$selected","_pkg$flights2","_pkg$flights2$airline","_pkg$selectedAirline","_pkg$flights3","adjustedStays","sum","createdAt","perPersonTotal","Math","round","totals","PKR","SAR","max","pax","USD","toFixed","onClick","agency","name","email","address","hotelsSelected","makkah","madinah","i","_s$countedDays","_s$weekendDates","_s$date2","countedCheckInIso","countedLastNightIso","join","transport","vehicle","flights","selectedAirline","airline","role","style","maxHeight","disabled","ref","logo","src","alt","phone","toLocaleDateString","_s$date3","nights","visa","visaType"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/components/SavedPackages.jsx"],"sourcesContent":["// src/components/SavedPackages.jsx\r\nimport React, { useState, useRef } from \"react\";\r\nimport { exportPdf } from \"../services/pdfService\";\r\nimport Footer from \"./Footer\";\r\n\r\nfunction addDaysIso(iso, n) {\r\n  if (!iso) return \"\";\r\n  const [y, m, d] = iso.split(\"-\").map(Number);\r\n  const dt = new Date(y, m - 1, d);\r\n  dt.setDate(dt.getDate() + n);\r\n  const yyyy = dt.getFullYear();\r\n  const mm = String(dt.getMonth() + 1).padStart(2, \"0\");\r\n  const dd = String(dt.getDate()).padStart(2, \"0\");\r\n  return `${yyyy}-${mm}-${dd}`;\r\n}\r\nconst sumCity = (segs, city) =>\r\n  segs\r\n    .filter((s) => s.type === \"stay\" && s.city === city)\r\n    .reduce((a, s) => a + Number(s.countedDays || 0), 0);\r\n\r\nconst sumWeekend = (segs, city) =>\r\n  segs\r\n    .filter((s) => s.type === \"stay\" && s.city === city)\r\n    .reduce(\r\n      (a, s) => a + (Array.isArray(s.weekendDates) ? s.weekendDates.length : 0),\r\n      0\r\n    );\r\n\r\n/**\r\n * SavedPackages\r\n *\r\n * Props:\r\n * - packages: array of saved package snapshots\r\n * - setPackages: setter to update packages (delete etc.)\r\n *\r\n * Features:\r\n * - List packages (compact)\r\n * - Show / Hide Details per package (in-list)\r\n * - Preview modal (full package) with Export PDF button\r\n * - Delete package (with confirm)\r\n *\r\n * Simple, readable UI using Tailwind (matches app style)\r\n */\r\n\r\nfunction fmtSAR(n) {\r\n  try {\r\n    return Number(n || 0).toLocaleString();\r\n  } catch {\r\n    return n;\r\n  }\r\n}\r\n\r\nexport default function SavedPackages({ packages = [], setPackages }) {\r\n  console.log(\"üì¶ SavedPackages packages prop\", packages);\r\n\r\n  const [expanded, setExpanded] = useState({}); // { [id]: true }\r\n  const [previewPkg, setPreviewPkg] = useState(null); // package being previewed\r\n  const previewRef = useRef(null);\r\n  const [exporting, setExporting] = useState(false);\r\n\r\n  function toggleExpand(id) {\r\n    setExpanded((s) => ({ ...s, [id]: !s[id] }));\r\n  }\r\n\r\n  function handleDelete(id) {\r\n    if (!confirm(\"Are you sure you want to delete this package?\")) return;\r\n    const next = (packages || []).filter((p) => p.id !== id);\r\n    setPackages(next);\r\n  }\r\n\r\n  function openPreview(pkg) {\r\n    setPreviewPkg(pkg);\r\n    // small delay to let modal render before any further action (not required but safe)\r\n    setTimeout(() => {\r\n      if (previewRef.current) {\r\n        // noop\r\n      }\r\n    }, 50);\r\n  }\r\n\r\n  async function handleExportPdf(pkg) {\r\n    if (!previewRef.current) {\r\n      alert(\"Preview not ready for export.\");\r\n      return;\r\n    }\r\n    try {\r\n      setExporting(true);\r\n      const fileName = `${pkg.id || \"package\"}.pdf`;\r\n      await exportPdf(previewRef.current, fileName, { format: \"a4\", scale: 2 });\r\n      setExporting(false);\r\n    } catch (err) {\r\n      console.error(\"Export PDF failed:\", err);\r\n      setExporting(false);\r\n      alert(\"Export failed. See console for details.\");\r\n    }\r\n  }\r\n  async function handlePrint(pkg) {\r\n    // ensure preview DOM exists; if not, open preview then retry\r\n    if (!previewRef.current) {\r\n      openPreview(pkg);\r\n      // wait a short moment for modal to render then retry\r\n      setTimeout(() => {\r\n        handlePrint(pkg);\r\n      }, 300);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const blob = await exportPdf(\r\n        previewRef.current,\r\n        `${pkg.id || \"package\"}.pdf`,\r\n        {\r\n          format: \"a4\",\r\n          scale: 3,\r\n          forceSinglePage: true,\r\n          skipSave: true,\r\n        }\r\n      );\r\n\r\n      const url = URL.createObjectURL(blob);\r\n      const w = window.open(url, \"_blank\");\r\n      if (!w) {\r\n        alert(\"Popup blocked ‚Äî allow popups.\");\r\n        return;\r\n      }\r\n\r\n      w.focus();\r\n      setTimeout(() => {\r\n        try {\r\n          w.print();\r\n        } catch {}\r\n      }, 600);\r\n    } catch (err) {\r\n      console.error(\"Print failed\", err);\r\n      alert(\"Print failed.\");\r\n    }\r\n  }\r\n\r\n  // Render a compact itinerary snippet (safe fallback)\r\n  function renderItinerarySnippet(itinerary) {\r\n    if (!itinerary)\r\n      return <div className=\"text-xs text-gray-500\">No itinerary</div>;\r\n    // Use segments or adjustedSegments\r\n    const segs = itinerary.adjustedSegments || [];\r\n\r\n    return (\r\n      <div className=\"text-sm text-gray-700 space-y-1\">\r\n        {segs.slice(0, 4).map((s, idx) => {\r\n          if (s.type === \"travel\")\r\n            return (\r\n              <div key={idx} className=\"text-xs text-gray-600\">\r\n                Travel: {s.date?.human || s.date || s.iso}\r\n              </div>\r\n            );\r\n          return (\r\n            <div key={idx} className=\"text-xs\">\r\n              <b className=\"capitalize\">{s.city}</b>{\" \"}\r\n              <span className=\"text-gray-600\">‚Äî {s.countedDays} nights</span>\r\n            </div>\r\n          );\r\n        })}\r\n        {segs.length > 4 && (\r\n          <div className=\"text-xs text-gray-500\">...more</div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"mt-5 space-y-4 max-w-4xl mx-auto px-3\">\r\n      {(!packages || packages.length === 0) && (\r\n        <div className=\"text-gray-500 text-sm\">No packages saved yet.</div>\r\n      )}\r\n\r\n      {(packages || []).map((pkg) => (\r\n        <div\r\n          key={pkg.id}\r\n          className=\"\r\n    p-4 rounded-xl\r\n    bg-gradient-to-r from-indigo-50 via-white to-sky-50\r\n    border border-indigo-100\r\n    shadow-sm\r\n    flex flex-col md:flex-row md:items-center md:justify-between\r\n    gap-3 w-full max-w-full overflow-hidden\r\n    text-center\r\n  \"\r\n        >\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex flex-col gap-4\">\r\n              <div>\r\n                <div className=\"font-medium text-sm\">\r\n                  {Number(\r\n                    pkg.itinerary?.adjustedStays\r\n                      ? pkg.itinerary.adjustedStays.reduce(\r\n                          (sum, s) => sum + Number(s.countedDays || 0),\r\n                          0\r\n                        )\r\n                      : 0\r\n                  )}{\" \"}\r\n                  Days Package ‚Äî{\" \"}\r\n                  {pkg.createdAt\r\n                    ? new Date(pkg.createdAt).toLocaleString()\r\n                    : pkg.id}\r\n                </div>\r\n\r\n                {/* NEW ‚Äî Perfect Layout: Per Person + Totals (PKR Bold) */}\r\n                <div className=\"text-center text-xs mt-2 px-1\">\r\n                  {/* Per Person Line */}\r\n                  <div className=\"mb-1 font-medium flex flex-col sm:flex-row flex-wrap sm:items-center sm:justify-center gap-1 sm:gap-4\">\r\n                    Per Person:\r\n                    <span className=\"ml-3 font-bold\">\r\n                      PKR{\" \"}\r\n                      {fmtSAR(\r\n                        pkg.perPersonTotal\r\n                          ? Math.round(\r\n                              (Number(pkg.perPersonTotal) *\r\n                                (pkg.totals?.PKR || 0)) /\r\n                                (pkg.totals?.SAR ||\r\n                                  Number(pkg.perPersonTotal) ||\r\n                                  1)\r\n                            )\r\n                          : pkg.totals?.PKR\r\n                          ? Math.round(\r\n                              pkg.totals.PKR / Math.max(1, pkg.pax || 1)\r\n                            )\r\n                          : 0\r\n                      )}\r\n                    </span>\r\n                    <span className=\"ml-4\">\r\n                      SAR{\" \"}\r\n                      {fmtSAR(\r\n                        pkg.perPersonTotal ??\r\n                          (pkg.totals?.SAR\r\n                            ? Math.round(\r\n                                pkg.totals.SAR / Math.max(1, pkg.pax || 1)\r\n                              )\r\n                            : 0)\r\n                      )}\r\n                    </span>\r\n                    <span className=\"ml-4\">\r\n                      USD{\" \"}\r\n                      {(pkg.perPersonTotal\r\n                        ? (Number(pkg.perPersonTotal) *\r\n                            Number(pkg.totals?.USD || 0)) /\r\n                          Number(\r\n                            pkg.totals?.SAR || Number(pkg.perPersonTotal) || 1\r\n                          )\r\n                        : Number(pkg.totals?.USD || 0) /\r\n                          Math.max(1, pkg.pax || 1)\r\n                      ).toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Pax + Totals Line */}\r\n                  <div className=\"mt-1 font-medium flex flex-col sm:flex-row sm:items-center sm:justify-center gap-1 sm:gap-0\">\r\n                    Pax {pkg.pax || 1} &nbsp;&nbsp; | &nbsp;&nbsp; Totals:\r\n                    <span className=\"ml-3 font-bold\">\r\n                      PKR {fmtSAR(pkg.totals?.PKR || 0)}\r\n                    </span>\r\n                    <span className=\"ml-4\">\r\n                      SAR {fmtSAR(pkg.totals?.SAR || 0)}\r\n                    </span>\r\n                    <span className=\"ml-4\">\r\n                      USD {(pkg.totals?.USD || 0).toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* compact details (collapsible) */}\r\n                <div className=\"mt-3\">\r\n                  <button\r\n                    onClick={() => toggleExpand(pkg.id)}\r\n                    className=\"text-xs text-indigo-600 hover:underline\"\r\n                    type=\"button\"\r\n                  >\r\n                    {expanded[pkg.id] ? \"Hide details\" : \"Show details\"}\r\n                  </button>\r\n\r\n                  {expanded[pkg.id] && (\r\n                    <div className=\"mt-2 p-3 bg-gray-50 rounded text-sm text-gray-700 space-y-4\">\r\n                      {/* Agency */}\r\n                      {pkg.agency && (\r\n                        <div>\r\n                          <div className=\"text-xs text-gray-500\">Agency</div>\r\n                          <div className=\"text-lg font-extrabold text-center bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent\">\r\n                            {pkg.agency.name || \"No name\"}\r\n                          </div>\r\n\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {pkg.agency.email || \"\"}\r\n                          </div>\r\n                          {pkg.agency.address && (\r\n                            <div className=\"text-xs text-gray-500\">\r\n                              {pkg.agency.address}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Hotels (Full Detail - Price hidden, Weekend nights visible) */}\r\n                      <div>\r\n                        <div className=\"flex items-center justify-center gap-2 text-sm font-extrabold text-indigo-700 mb-2\">\r\n                          <span className=\"text-xl\">üè®</span>\r\n                          <span>Hotels</span>\r\n                        </div>\r\n\r\n                        <div className=\"grid md:grid-cols-2 gap-4 mt-3 bg-gradient-to-r from-gray-50 via-white to-gray-50 p-3 rounded-xl\">\r\n                          {/* Makkah */}\r\n                          <div\r\n                            className=\"\r\n    p-3 rounded-xl\r\n    bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50\r\n    border border-amber-200\r\n    shadow-sm\r\n    text-center\r\n  \"\r\n                          >\r\n                            <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\">\r\n                              <span className=\"text-2xl\">üïã</span>\r\n                              <span>Makkah</span>\r\n                            </div>\r\n\r\n                            <div className=\"font-medium\">\r\n                              {pkg.hotelsSelected?.makkah?.name || \"-\"}\r\n                            </div>\r\n\r\n                            {pkg.itinerary?.adjustedSegments &&\r\n                              (() => {\r\n                                const segs = pkg.itinerary.adjustedSegments;\r\n                                return (\r\n                                  <>\r\n                                    <div className=\"text-xs text-gray-600\">\r\n                                      Nights: {sumCity(segs, \"makkah\")}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-600\">\r\n                                      Weekend nights:{\" \"}\r\n                                      {sumWeekend(segs, \"makkah\")}\r\n                                    </div>\r\n                                  </>\r\n                                );\r\n                              })()}\r\n                          </div>\r\n\r\n                          {/* Madinah */}\r\n                          <div\r\n                            className=\"\r\n    p-3 rounded-xl\r\n    bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50\r\n    border border-emerald-200\r\n    shadow-sm\r\n    text-center\r\n  \"\r\n                          >\r\n                            <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\">\r\n                              <span className=\"text-2xl\">üïå</span>\r\n                              <span>Madinah</span>\r\n                            </div>\r\n\r\n                            <div className=\"font-medium\">\r\n                              {pkg.hotelsSelected?.madinah?.name || \"-\"}\r\n                            </div>\r\n\r\n                            {pkg.itinerary?.adjustedSegments &&\r\n                              (() => {\r\n                                const segs = pkg.itinerary.adjustedSegments;\r\n                                return (\r\n                                  <>\r\n                                    <div className=\"text-xs text-gray-600\">\r\n                                      Nights: {sumCity(segs, \"madinah\")}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-600\">\r\n                                      Weekend nights:{\" \"}\r\n                                      {sumWeekend(segs, \"madinah\")}\r\n                                    </div>\r\n                                  </>\r\n                                );\r\n                              })()}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Full Itinerary (same style as Preview page) */}\r\n                      <div>\r\n                        <div className=\"flex items-center justify-center gap-2 mb-2 text-sm font-extrabold text-indigo-700\">\r\n                          <span className=\"text-xl\">üó∫Ô∏è</span>\r\n                          <span>Itinerary</span>\r\n                        </div>\r\n\r\n                        <div className=\"mt-2 space-y-3\">\r\n                          {(pkg.itinerary?.adjustedSegments || []).map(\r\n                            (s, i) => {\r\n                              // Travel Segment\r\n                              if (s.type === \"travel\") {\r\n                                return (\r\n                                  <div\r\n                                    key={i}\r\n                                    className=\"\r\n    p-3 rounded-xl\r\n    bg-gradient-to-r from-sky-100 via-cyan-100 to-emerald-100\r\n    border border-cyan-200\r\n    text-sm\r\n    text-center\r\n    shadow-sm\r\n  \"\r\n                                  >\r\n                                    <div className=\"font-semibold\">\r\n                                      Travel Day\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-700\">\r\n                                      {s.date?.human || s.date || s.iso}\r\n                                    </div>\r\n                                  </div>\r\n                                );\r\n                              }\r\n\r\n                              // Stay Segment\r\n                              return (\r\n                                <div\r\n                                  key={i}\r\n                                  className=\"p-3 bg-white rounded border\"\r\n                                >\r\n                                  <div className=\"flex justify-between items-start\">\r\n                                    <div>\r\n                                      <div className=\"font-semibold capitalize\">\r\n                                        {s.city}\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"text-xs text-right text-gray-700\">\r\n                                      <div>\r\n                                        Check-in:{\" \"}\r\n                                        <span className=\"font-medium\">\r\n                                          {s.countedCheckInIso || \"-\"}\r\n                                        </span>\r\n                                      </div>\r\n                                      <div>\r\n                                        Check-out:{\" \"}\r\n                                        <span className=\"font-medium\">\r\n                                          {s.countedLastNightIso\r\n                                            ? addDaysIso(\r\n                                                s.countedLastNightIso,\r\n                                                1\r\n                                              )\r\n                                            : \"-\"}\r\n                                        </span>\r\n                                      </div>\r\n\r\n                                      <div className=\"mt-1 text-gray-600\">\r\n                                        Nights (counted): {s.countedDays ?? \"-\"}\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                  {/* counted + weekend */}\r\n                                  {(s.countedCheckInIso ||\r\n                                    s.countedLastNightIso) && (\r\n                                    <div className=\"mt-2 bg-gray-50 p-2 rounded border text-xs\">\r\n                                      <div>\r\n                                        Counted check-in:{\" \"}\r\n                                        <span className=\"font-medium\">\r\n                                          {s.countedCheckInIso || \"-\"}\r\n                                        </span>\r\n                                      </div>\r\n                                      <div>\r\n                                        Counted last-night:{\" \"}\r\n                                        <span className=\"font-medium\">\r\n                                          {s.countedLastNightIso || \"-\"}\r\n                                        </span>\r\n                                      </div>\r\n\r\n                                      {s.weekendDates?.length > 0 && (\r\n                                        <div className=\"mt-1 text-gray-600\">\r\n                                          Weekend nights:{\" \"}\r\n                                          {s.weekendDates.join(\", \")}\r\n                                        </div>\r\n                                      )}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              );\r\n                            }\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Transport, Visa & Ticket */}\r\n                      <div className=\"grid md:grid-cols-3 gap-3 text-sm\">\r\n                        <div className=\"p-3 bg-white rounded border\">\r\n                          <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-indigo-700\">\r\n                            <span className=\"text-xl\">üöå</span>\r\n                            <span>Transport</span>\r\n                          </div>\r\n\r\n                          <div className=\"font-medium\">\r\n                            {pkg.transport?.vehicle || pkg.vehicle || \"‚Äî\"}\r\n                          </div>\r\n                          {/* optional small note */}\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            Selected vehicle\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-3 bg-white rounded border\">\r\n                          <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\">\r\n                            <span className=\"text-xl\">üõÇ</span>\r\n                            <span>Visa</span>\r\n                          </div>\r\n\r\n                          <div className=\"font-medium\">e-visa</div>\r\n                        </div>\r\n\r\n                        <div className=\"p-3 bg-white rounded border\">\r\n                          <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\">\r\n                            <span className=\"text-xl\">‚úàÔ∏è</span>\r\n                            <span>Ticket</span>\r\n                          </div>\r\n\r\n                          <div className=\"font-medium\">\r\n                            {pkg.flights?.selectedAirline?.name ||\r\n                              pkg.flights?.airline?.name ||\r\n                              pkg.selectedAirline?.name ||\r\n                              pkg.flights?.airline ||\r\n                              \"‚Äî\"}\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            Selected airline\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Buttons */}\r\n              <div className=\"flex justify-center flex-wrap gap-3 mt-3\">\r\n                <button\r\n                  onClick={() => openPreview(pkg)}\r\n                  className=\"\r\n  px-4 py-2 text-sm rounded-lg\r\n  bg-gradient-to-r from-indigo-600 to-blue-600\r\n  text-white shadow hover:opacity-95\r\n  w-full sm:w-auto\r\n\"\r\n                >\r\n                  Preview\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => {\r\n                    // export quick PDF using a small inline preview creation\r\n                    openPreview(pkg);\r\n                    // wait a moment and then export (modal will open)\r\n                    setTimeout(() => {\r\n                      if (previewRef.current) {\r\n                        handleExportPdf(pkg);\r\n                      } else {\r\n                        // fallback: try once more later\r\n                        setTimeout(() => {\r\n                          if (previewRef.current) handleExportPdf(pkg);\r\n                        }, 200);\r\n                      }\r\n                    }, 250);\r\n                  }}\r\n                  className=\"\r\n  px-4 py-2 text-sm rounded-lg\r\n  bg-gradient-to-r from-emerald-600 to-teal-600\r\n  text-white shadow hover:opacity-95\r\n  w-full sm:w-auto\r\n\"\r\n                >\r\n                  Export PDF\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => handleDelete(pkg.id)}\r\n                  className=\"\r\n  px-4 py-2 text-sm rounded-lg\r\n  bg-gradient-to-r from-rose-600 to-red-600\r\n  text-white shadow hover:opacity-95\r\n  w-full sm:w-auto\r\n\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* small separator */}\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      {/* Preview Modal */}\r\n      {previewPkg && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 flex items-start justify-center p-6 bg-black/40\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n        >\r\n          <div\r\n            className=\"bg-white max-w-4xl w-full mx-auto rounded shadow-lg overflow-auto px-2 sm:px-0\"\r\n            style={{ maxHeight: \"90vh\" }}\r\n          >\r\n            {/* Header */}\r\n            <div\r\n              className=\"\r\n    flex items-center justify-between p-4\r\n    bg-gradient-to-r from-indigo-600 via-blue-600 to-teal-600\r\n    text-white\r\n  \"\r\n            >\r\n              <div className=\"text-lg font-semibold tracking-wide\">\r\n                Package Preview\r\n              </div>\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-2\">\r\n                {/* Export PDF */}\r\n                <button\r\n                  onClick={() => handleExportPdf(previewPkg)}\r\n                  disabled={exporting}\r\n                  className=\"px-4 py-1.5 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg text-sm font-semibold shadow hover:opacity-90\"\r\n                >\r\n                  {exporting ? \"Exporting...\" : \"Export PDF\"}\r\n                </button>\r\n\r\n                {/* Print Button (NEW) */}\r\n                <button\r\n                  onClick={() => handlePrint(previewPkg)}\r\n                  className=\"px-4 py-1.5 bg-gradient-to-r from-sky-600 to-blue-600 text-white rounded-lg text-sm font-semibold shadow hover:opacity-90\"\r\n                >\r\n                  Print\r\n                </button>\r\n\r\n                {/* Close */}\r\n                <button\r\n                  onClick={() => setPreviewPkg(null)}\r\n                  className=\"px-4 py-1.5 bg-white text-gray-700 border border-gray-300 rounded-lg text-sm font-medium shadow hover:bg-gray-50\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content to render & export */}\r\n            <div className=\"p-6\" ref={previewRef}>\r\n              {/* Top: Agency + Meta (updated) */}\r\n              <div className=\"flex items-start justify-between gap-6\">\r\n                {/* Logo */}\r\n                <div className=\"w-20 h-20 rounded flex items-center justify-center overflow-hidden bg-white border\">\r\n                  {previewPkg.agency?.logo ? (\r\n                    <img\r\n                      src={previewPkg.agency.logo}\r\n                      alt=\"Agency Logo\"\r\n                      className=\"w-full h-full object-contain\"\r\n                    />\r\n                  ) : (\r\n                    <span className=\"text-xs text-gray-400\">Logo</span>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Center Agency */}\r\n                <div className=\"flex-1 text-center\">\r\n                  <div\r\n                    className=\"\r\n      text-2xl font-extrabold text-center\r\n      bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600\r\n      bg-clip-text text-transparent\r\n    \"\r\n                  >\r\n                    {previewPkg.agency?.name || \"Agency\"}\r\n                  </div>\r\n\r\n                  <div className=\"text-sm text-gray-600 mt-1\">\r\n                    {previewPkg.agency?.email || \"\"}\r\n                    {previewPkg.agency?.phone\r\n                      ? ` ‚Ä¢ ${previewPkg.agency.phone}`\r\n                      : \"\"}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Only Created Date ‚Äî Package ID Removed */}\r\n                <div className=\"text-sm text-right text-gray-600\">\r\n                  <div>Created:</div>\r\n                  <div className=\"font-mono text-xs\">\r\n                    {previewPkg.createdAt\r\n                      ? new Date(previewPkg.createdAt).toLocaleDateString()\r\n                      : \"-\"}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Summary (preview modal) ‚Äî updated layout: Per Person (PKR bold), Pax + Totals same row */}\r\n              <div\r\n                className=\"\r\n    mt-8 p-6\r\n    rounded-2xl\r\n    bg-gradient-to-br from-indigo-50 via-white to-sky-50\r\n    border border-indigo-200\r\n    shadow-md\r\n  \"\r\n              >\r\n                <h3 className=\"text-center text-xl font-extrabold text-indigo-700 mb-4 tracking-wide\">\r\n                  {Number(\r\n                    previewPkg.itinerary?.adjustedStays\r\n                      ? previewPkg.itinerary.adjustedStays.reduce(\r\n                          (sum, s) => sum + Number(s.countedDays || 0),\r\n                          0\r\n                        )\r\n                      : 0\r\n                  )}{\" \"}\r\n                  Days Package Summary\r\n                </h3>\r\n\r\n                <div className=\"max-w-[820px] mx-auto text-center\">\r\n                  {/* Per Person ‚Äî PKR bold ‚Üí SAR ‚Üí USD */}\r\n                  <div className=\"mb-3\">\r\n                    <div className=\"text-xs text-gray-500\">Per Person</div>\r\n\r\n                    <div className=\"mt-1 flex flex-col sm:flex-row sm:items-baseline justify-center gap-2 sm:gap-6\">\r\n                      {/* PKR BOLD */}\r\n                      <span className=\"text-xl font-extrabold text-gray-900\">\r\n                        PKR{\" \"}\r\n                        {fmtSAR(\r\n                          previewPkg.perPersonTotal\r\n                            ? Math.round(\r\n                                (Number(previewPkg.perPersonTotal) *\r\n                                  (previewPkg.totals?.PKR || 0)) /\r\n                                  (previewPkg.totals?.SAR ||\r\n                                    Number(previewPkg.perPersonTotal) ||\r\n                                    1)\r\n                              )\r\n                            : previewPkg.totals?.PKR\r\n                            ? Math.round(\r\n                                Number(previewPkg.totals.PKR) /\r\n                                  Math.max(1, Number(previewPkg.pax || 1))\r\n                              )\r\n                            : 0\r\n                        )}\r\n                      </span>\r\n\r\n                      {/* SAR normal */}\r\n                      <span className=\"text-lg text-gray-700\">\r\n                        SAR{\" \"}\r\n                        {fmtSAR(\r\n                          Number(\r\n                            previewPkg.perPersonTotal ??\r\n                              (previewPkg.totals?.SAR\r\n                                ? Math.round(\r\n                                    Number(previewPkg.totals.SAR) /\r\n                                      Math.max(1, Number(previewPkg.pax || 1))\r\n                                  )\r\n                                : 0)\r\n                          )\r\n                        )}\r\n                      </span>\r\n\r\n                      {/* USD normal */}\r\n                      <span className=\"text-lg text-gray-700\">\r\n                        USD{\" \"}\r\n                        {(previewPkg.perPersonTotal\r\n                          ? (Number(previewPkg.perPersonTotal) *\r\n                              Number(previewPkg.totals?.USD || 0)) /\r\n                            Number(\r\n                              previewPkg.totals?.SAR ||\r\n                                Number(previewPkg.perPersonTotal) ||\r\n                                1\r\n                            )\r\n                          : Number(previewPkg.totals?.USD || 0) /\r\n                            Math.max(1, Number(previewPkg.pax || 1))\r\n                        ).toFixed(2)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Pax + Totals in SAME ROW */}\r\n                  <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-12 mt-2\">\r\n                    {/* Pax */}\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs text-gray-500\">Pax</div>\r\n                      <div className=\"text-lg font-medium\">\r\n                        {previewPkg.pax || 1}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Totals */}\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs text-gray-500\">Totals</div>\r\n\r\n                      <div className=\"mt-1 flex flex-col sm:flex-row sm:items-baseline justify-center gap-2 sm:gap-6\">\r\n                        {/* PKR bold */}\r\n                        <span className=\"text-xl font-extrabold text-gray-900\">\r\n                          PKR {fmtSAR(previewPkg.totals?.PKR || 0)}\r\n                        </span>\r\n\r\n                        {/* SAR normal */}\r\n                        <span className=\"text-lg text-gray-700\">\r\n                          SAR {fmtSAR(previewPkg.totals?.SAR || 0)}\r\n                        </span>\r\n\r\n                        {/* USD normal */}\r\n                        <span className=\"text-lg text-gray-700\">\r\n                          USD {Number(previewPkg.totals?.USD || 0).toFixed(2)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Itinerary detailed */}\r\n              <div className=\"mt-6\">\r\n                <h4 className=\"mb-3 text-lg font-extrabold text-center text-indigo-700 tracking-wide\">\r\n                  Itinerary\r\n                </h4>\r\n\r\n                {previewPkg.itinerary?.adjustedSegments ? (\r\n                  <div className=\"space-y-3\">\r\n                    {previewPkg.itinerary.adjustedSegments.map((s, i) => {\r\n                      if (s.type === \"travel\") {\r\n                        return (\r\n                          <div\r\n                            key={i}\r\n                            className=\"\r\n    p-3 rounded-xl\r\n    bg-gradient-to-r from-sky-100 via-cyan-100 to-emerald-100\r\n    border border-cyan-200\r\n    text-sm\r\n    text-center\r\n    shadow-sm\r\n  \"\r\n                          >\r\n                            <div className=\"flex items-center justify-center gap-2 text-sm font-extrabold text-emerald-700\">\r\n                              <span className=\"text-lg\">üöå</span>\r\n                              <span>Travel Day</span>\r\n                            </div>\r\n\r\n                            <div className=\"text-sm text-gray-700 mt-1\">\r\n                              {s.date?.human || s.date || s.iso}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      }\r\n                      // stay\r\n                      return (\r\n                        <div key={i} className=\"p-3 border rounded\">\r\n                          <div className=\"flex justify-between items-start\">\r\n                            <div>\r\n                              <div className=\"font-extrabold capitalize text-center text-indigo-700\">\r\n                                {s.city}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-sm text-center w-full mt-1\">\r\n                              <div>\r\n                                Check-in:{\" \"}\r\n                                <span className=\"font-medium\">\r\n                                  {s.countedCheckInIso || \"-\"}\r\n                                </span>\r\n                              </div>\r\n                              <div>\r\n                                Check-out:{\" \"}\r\n                                <span className=\"font-medium\">\r\n                                  {s.countedLastNightIso\r\n                                    ? addDaysIso(s.countedLastNightIso, 1)\r\n                                    : \"-\"}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* weekend list */}\r\n                          {s.weekendDates && s.weekendDates.length > 0 && (\r\n                            <div\r\n                              className=\"mt-3 p-3 rounded-lg \r\n  bg-gradient-to-r from-indigo-50 via-blue-50 to-cyan-50 \r\n  border border-blue-200 text-center\"\r\n                            >\r\n                              <div className=\"font-semibold text-xs\">\r\n                                Weekend nights:\r\n                              </div>\r\n                              <div className=\"text-xs mt-1 flex flex-wrap gap-2\">\r\n                                {s.weekendDates.map((iso) => (\r\n                                  <div\r\n                                    key={iso}\r\n                                    className=\"px-2 py-1 bg-white rounded border text-xs\"\r\n                                  >\r\n                                    {iso}\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-sm text-gray-500\">\r\n                    No itinerary data available\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Hotels */}\r\n              <div className=\"mt-6\">\r\n                <h4 className=\"flex items-center justify-center gap-2 mb-3 text-lg font-extrabold text-indigo-700\">\r\n                  <span className=\"text-2xl\">üè®</span>\r\n                  Hotels\r\n                </h4>\r\n\r\n                <div className=\"grid md:grid-cols-2 gap-4\">\r\n                  <div\r\n                    className=\"p-4 rounded-xl \r\n  bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 \r\n  border border-amber-200 shadow-sm text-center\"\r\n                  >\r\n                    <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\">\r\n                      <span className=\"text-2xl\">üïã</span>\r\n                      <span>Makkah</span>\r\n                    </div>\r\n\r\n                    <div className=\"font-medium\">\r\n                      {previewPkg.hotelsSelected?.makkah?.name || \"-\"}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-700 mt-1\">\r\n                      Nights: {previewPkg.hotelsSelected?.makkah?.nights ?? \"-\"}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div\r\n                    className=\"\r\n    p-3 rounded-xl\r\n    bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50\r\n    border border-emerald-200\r\n    shadow-sm\r\n    text-center\r\n  \"\r\n                  >\r\n                    <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\">\r\n                      <span className=\"text-2xl\">üïå</span>\r\n                      <span>Madinah</span>\r\n                    </div>\r\n                    <div className=\"font-medium\">\r\n                      {previewPkg.hotelsSelected?.madinah?.name || \"-\"}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-700 mt-1\">\r\n                      Nights:{\" \"}\r\n                      {previewPkg.hotelsSelected?.madinah?.nights ?? \"-\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Transport / Visa / Ticket (preview modal) */}\r\n              <div className=\"mt-6 grid md:grid-cols-3 gap-3 text-sm\">\r\n                <div className=\"p-3 bg-white rounded border\">\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-indigo-700\">\r\n                    <span className=\"text-xl\">üöå</span>\r\n                    <span>Transport</span>\r\n                  </div>\r\n\r\n                  <div className=\"font-medium\">\r\n                    {previewPkg.transport?.vehicle || previewPkg.vehicle || \"‚Äî\"}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-3 bg-white rounded border\">\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-emerald-700\">\r\n                    <span className=\"text-xl\">üõÇ</span>\r\n                    <span>Visa</span>\r\n                  </div>\r\n\r\n                  <div className=\"font-medium\">\r\n                    {previewPkg.visa?.type ||\r\n                      previewPkg.visa?.visaType ||\r\n                      \"e-visa\"}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-3 bg-white rounded border\">\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm font-semibold text-amber-700\">\r\n                    <span className=\"text-xl\">‚úàÔ∏è</span>\r\n                    <span>Ticket</span>\r\n                  </div>\r\n\r\n                  <div className=\"font-medium\">\r\n                    {previewPkg.flights?.selectedAirline?.name ||\r\n                      previewPkg.flights?.airline?.name ||\r\n                      previewPkg.selectedAirline?.name ||\r\n                      previewPkg.flights?.airline ||\r\n                      \"‚Äî\"}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <Footer />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}