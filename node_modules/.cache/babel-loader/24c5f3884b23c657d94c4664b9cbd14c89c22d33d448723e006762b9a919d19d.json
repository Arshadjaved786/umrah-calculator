{"ast":null,"code":"// src/services/hotelService.js\nimport localforage from \"localforage\";\nimport makkahData from \"../data/makkahHotels.json\";\nimport madinahData from \"../data/madinahHotels.json\";\nconst store = localforage.createInstance({\n  name: \"umrah_data_store\"\n});\n\n// --- Read functions (use cache if present) ---\nexport async function getMakkahHotels(force = false) {\n  try {\n    if (!force) {\n      const cached = await store.getItem(\"makkah_hotels\");\n      if (cached && Array.isArray(cached) && cached.length > 0) {\n        return cached;\n      }\n    }\n    await store.setItem(\"makkah_hotels\", makkahData);\n    return makkahData;\n  } catch (err) {\n    return makkahData;\n  }\n}\nexport async function getMadinahHotels(force = false) {\n  try {\n    if (!force) {\n      const cached = await store.getItem(\"madinah_hotels\");\n      if (cached && Array.isArray(cached) && cached.length > 0) {\n        return cached;\n      }\n    }\n    await store.setItem(\"madinah_hotels\", madinahData);\n    return madinahData;\n  } catch (err) {\n    return madinahData;\n  }\n}\n\n// --- Write helpers: add / update / delete for Makkah ---\nexport async function addMakkahHotel(hotel) {\n  try {\n    const list = (await getMakkahHotels()) || [];\n    // ensure unique id\n    const id = hotel.id || `mkh-${Date.now()}`;\n    const next = [...list, {\n      ...hotel,\n      id\n    }];\n    await store.setItem(\"makkah_hotels\", next);\n    return {\n      ok: true,\n      hotel: {\n        ...hotel,\n        id\n      }\n    };\n  } catch (err) {\n    return {\n      ok: false,\n      error: err\n    };\n  }\n}\nexport async function updateMakkahHotel(id, patch) {\n  try {\n    const list = (await getMakkahHotels()) || [];\n    const next = list.map(h => h.id === id ? {\n      ...h,\n      ...patch\n    } : h);\n    await store.setItem(\"makkah_hotels\", next);\n    return {\n      ok: true\n    };\n  } catch (err) {\n    return {\n      ok: false,\n      error: err\n    };\n  }\n}\nexport async function deleteMakkahHotel(id) {\n  try {\n    const list = (await getMakkahHotels()) || [];\n    const next = list.filter(h => h.id !== id);\n    await store.setItem(\"makkah_hotels\", next);\n    return {\n      ok: true\n    };\n  } catch (err) {\n    return {\n      ok: false,\n      error: err\n    };\n  }\n}\n\n// --- Write helpers: add / update / delete for Madinah ---\nexport async function addMadinahHotel(hotel) {\n  try {\n    const list = (await getMadinahHotels()) || [];\n    const id = hotel.id || `mdn-${Date.now()}`;\n    const next = [...list, {\n      ...hotel,\n      id\n    }];\n    await store.setItem(\"madinah_hotels\", next);\n    return {\n      ok: true,\n      hotel: {\n        ...hotel,\n        id\n      }\n    };\n  } catch (err) {\n    return {\n      ok: false,\n      error: err\n    };\n  }\n}\nexport async function updateMadinahHotel(id, patch) {\n  try {\n    const list = (await getMadinahHotels()) || [];\n    const next = list.map(h => h.id === id ? {\n      ...h,\n      ...patch\n    } : h);\n    await store.setItem(\"madinah_hotels\", next);\n    return {\n      ok: true\n    };\n  } catch (err) {\n    return {\n      ok: false,\n      error: err\n    };\n  }\n}\nexport async function deleteMadinahHotel(id) {\n  try {\n    const list = (await getMadinahHotels()) || [];\n    const next = list.filter(h => h.id !== id);\n    await store.setItem(\"madinah_hotels\", next);\n    return {\n      ok: true\n    };\n  } catch (err) {\n    return {\n      ok: false,\n      error: err\n    };\n  }\n}\n\n// --- Cache utilities ---\nexport async function clearHotelCache() {\n  try {\n    await store.removeItem(\"makkah_hotels\");\n    await store.removeItem(\"madinah_hotels\");\n    return true;\n  } catch (err) {\n    return false;\n  }\n}","map":{"version":3,"names":["localforage","makkahData","madinahData","store","createInstance","name","getMakkahHotels","force","cached","getItem","Array","isArray","length","setItem","err","getMadinahHotels","addMakkahHotel","hotel","list","id","Date","now","next","ok","error","updateMakkahHotel","patch","map","h","deleteMakkahHotel","filter","addMadinahHotel","updateMadinahHotel","deleteMadinahHotel","clearHotelCache","removeItem"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/services/hotelService.js"],"sourcesContent":["// src/services/hotelService.js\r\nimport localforage from \"localforage\";\r\nimport makkahData from \"../data/makkahHotels.json\";\r\nimport madinahData from \"../data/madinahHotels.json\";\r\n\r\nconst store = localforage.createInstance({\r\n  name: \"umrah_data_store\",\r\n});\r\n\r\n// --- Read functions (use cache if present) ---\r\nexport async function getMakkahHotels(force = false) {\r\n  try {\r\n    if (!force) {\r\n      const cached = await store.getItem(\"makkah_hotels\");\r\n      if (cached && Array.isArray(cached) && cached.length > 0) {\r\n        return cached;\r\n      }\r\n    }\r\n    await store.setItem(\"makkah_hotels\", makkahData);\r\n    return makkahData;\r\n  } catch (err) {\r\n    return makkahData;\r\n  }\r\n}\r\n\r\nexport async function getMadinahHotels(force = false) {\r\n  try {\r\n    if (!force) {\r\n      const cached = await store.getItem(\"madinah_hotels\");\r\n      if (cached && Array.isArray(cached) && cached.length > 0) {\r\n        return cached;\r\n      }\r\n    }\r\n    await store.setItem(\"madinah_hotels\", madinahData);\r\n    return madinahData;\r\n  } catch (err) {\r\n    return madinahData;\r\n  }\r\n}\r\n\r\n// --- Write helpers: add / update / delete for Makkah ---\r\nexport async function addMakkahHotel(hotel) {\r\n  try {\r\n    const list = (await getMakkahHotels()) || [];\r\n    // ensure unique id\r\n    const id = hotel.id || `mkh-${Date.now()}`;\r\n    const next = [...list, { ...hotel, id }];\r\n    await store.setItem(\"makkah_hotels\", next);\r\n    return { ok: true, hotel: { ...hotel, id } };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function updateMakkahHotel(id, patch) {\r\n  try {\r\n    const list = (await getMakkahHotels()) || [];\r\n    const next = list.map((h) => (h.id === id ? { ...h, ...patch } : h));\r\n    await store.setItem(\"makkah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function deleteMakkahHotel(id) {\r\n  try {\r\n    const list = (await getMakkahHotels()) || [];\r\n    const next = list.filter((h) => h.id !== id);\r\n    await store.setItem(\"makkah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\n// --- Write helpers: add / update / delete for Madinah ---\r\nexport async function addMadinahHotel(hotel) {\r\n  try {\r\n    const list = (await getMadinahHotels()) || [];\r\n    const id = hotel.id || `mdn-${Date.now()}`;\r\n    const next = [...list, { ...hotel, id }];\r\n    await store.setItem(\"madinah_hotels\", next);\r\n    return { ok: true, hotel: { ...hotel, id } };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function updateMadinahHotel(id, patch) {\r\n  try {\r\n    const list = (await getMadinahHotels()) || [];\r\n    const next = list.map((h) => (h.id === id ? { ...h, ...patch } : h));\r\n    await store.setItem(\"madinah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function deleteMadinahHotel(id) {\r\n  try {\r\n    const list = (await getMadinahHotels()) || [];\r\n    const next = list.filter((h) => h.id !== id);\r\n    await store.setItem(\"madinah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\n// --- Cache utilities ---\r\nexport async function clearHotelCache() {\r\n  try {\r\n    await store.removeItem(\"makkah_hotels\");\r\n    await store.removeItem(\"madinah_hotels\");\r\n    return true;\r\n  } catch (err) {\r\n    return false;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}