{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{buildQrUrl,downloadQrAsPng}from\"../../services/qrService\";/**\r\n * QRGenerator.jsx (updated)\r\n *\r\n * Props:\r\n * - value (string)         -> required\r\n * - size (number)          -> px default 300\r\n * - fileName (string)      -> download name\r\n * - showCopy (bool)        -> default true\r\n * - showDownload (bool)    -> default true\r\n * - showLink (bool)        -> show textual link (default true)\r\n * - showActions (bool)     -> show Open/Copy/Download buttons (default true)\r\n * - className (string)\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function QRGenerator(_ref){let{value,size=300,fileName=\"qr.png\",showCopy=true,showDownload=true,showLink=true,showActions=true,className=\"\"}=_ref;const[src,setSrc]=useState(\"\");const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const pxSize=\"\".concat(size,\"x\").concat(size);useEffect(()=>{if(!value){setSrc(\"\");setLoading(false);setError(\"No value provided for QR\");return;}setLoading(true);setError(null);try{const url=buildQrUrl(value,pxSize);setSrc(url);}catch(err){console.error(\"QR build failed\",err);setError(\"QR بنانے میں مسئلہ ہوا\");setSrc(\"\");}finally{setLoading(false);}},[value,pxSize]);async function handleDownload(){if(!value)return;try{setLoading(true);// download at higher resolution for print\nawait downloadQrAsPng(value,fileName,\"800x800\");}catch(err){console.error(\"Download failed\",err);setError(\"Download ناکام ہوا\");}finally{setLoading(false);}}async function handleCopy(){if(!value)return;try{await navigator.clipboard.writeText(value);alert(\"Link copied to clipboard\");}catch(err){console.error(\"Copy failed\",err);setError(\"Copy نہیں ہو سکا\");}}return/*#__PURE__*/_jsx(\"div\",{className:\"qr-generator \".concat(className),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border p-1 rounded flex items-center justify-center\",style:{width:size,height:size,minWidth:size,minHeight:size},\"aria-hidden\":loading||!!error,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 text-center\",children:error}):/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"QR code\",className:\"w-full h-full object-contain\",style:{imageRendering:\"pixelated\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[showLink&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700 break-words\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"Profile Link\"}),/*#__PURE__*/_jsx(\"a\",{href:value,target:\"_blank\",rel:\"noreferrer\",className:\"text-xs text-indigo-600 underline\",children:value})]}),showActions&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center gap-2\",children:[showDownload&&/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,className:\"px-3 py-1 bg-gray-100 border rounded text-sm hover:bg-gray-200\",type:\"button\",\"aria-label\":\"Download QR\",children:\"Download QR\"}),showCopy&&/*#__PURE__*/_jsx(\"button\",{onClick:handleCopy,className:\"px-3 py-1 border rounded text-sm hover:bg-gray-50\",type:\"button\",\"aria-label\":\"Copy link\",children:\"Copy Link\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(value,\"_blank\",\"noopener\"),className:\"px-3 py-1 border rounded text-sm hover:bg-gray-50\",type:\"button\",\"aria-label\":\"Open link\",children:\"Open\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 mt-2\",children:error})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","buildQrUrl","downloadQrAsPng","jsx","_jsx","jsxs","_jsxs","QRGenerator","_ref","value","size","fileName","showCopy","showDownload","showLink","showActions","className","src","setSrc","loading","setLoading","error","setError","pxSize","concat","url","err","console","handleDownload","handleCopy","navigator","clipboard","writeText","alert","children","style","width","height","minWidth","minHeight","alt","imageRendering","href","target","rel","onClick","type","window","open"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/components/QR/QRGenerator.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { buildQrUrl, downloadQrAsPng } from \"../../services/qrService\";\r\n\r\n/**\r\n * QRGenerator.jsx (updated)\r\n *\r\n * Props:\r\n * - value (string)         -> required\r\n * - size (number)          -> px default 300\r\n * - fileName (string)      -> download name\r\n * - showCopy (bool)        -> default true\r\n * - showDownload (bool)    -> default true\r\n * - showLink (bool)        -> show textual link (default true)\r\n * - showActions (bool)     -> show Open/Copy/Download buttons (default true)\r\n * - className (string)\r\n */\r\n\r\nexport default function QRGenerator({\r\n  value,\r\n  size = 300,\r\n  fileName = \"qr.png\",\r\n  showCopy = true,\r\n  showDownload = true,\r\n  showLink = true,\r\n  showActions = true,\r\n  className = \"\",\r\n}) {\r\n  const [src, setSrc] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const pxSize = `${size}x${size}`;\r\n\r\n  useEffect(() => {\r\n    if (!value) {\r\n      setSrc(\"\");\r\n      setLoading(false);\r\n      setError(\"No value provided for QR\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const url = buildQrUrl(value, pxSize);\r\n      setSrc(url);\r\n    } catch (err) {\r\n      console.error(\"QR build failed\", err);\r\n      setError(\"QR بنانے میں مسئلہ ہوا\");\r\n      setSrc(\"\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [value, pxSize]);\r\n\r\n  async function handleDownload() {\r\n    if (!value) return;\r\n    try {\r\n      setLoading(true);\r\n      // download at higher resolution for print\r\n      await downloadQrAsPng(value, fileName, \"800x800\");\r\n    } catch (err) {\r\n      console.error(\"Download failed\", err);\r\n      setError(\"Download ناکام ہوا\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleCopy() {\r\n    if (!value) return;\r\n    try {\r\n      await navigator.clipboard.writeText(value);\r\n      alert(\"Link copied to clipboard\");\r\n    } catch (err) {\r\n      console.error(\"Copy failed\", err);\r\n      setError(\"Copy نہیں ہو سکا\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`qr-generator ${className}`}>\r\n      <div className=\"flex items-center gap-3\">\r\n        <div\r\n          className=\"bg-white border p-1 rounded flex items-center justify-center\"\r\n          style={{\r\n            width: size,\r\n            height: size,\r\n            minWidth: size,\r\n            minHeight: size,\r\n          }}\r\n          aria-hidden={loading || !!error}\r\n        >\r\n          {loading ? (\r\n            <div className=\"text-xs text-gray-500\">Loading...</div>\r\n          ) : error ? (\r\n            <div className=\"text-xs text-red-500 text-center\">{error}</div>\r\n          ) : (\r\n            <img\r\n              src={src}\r\n              alt=\"QR code\"\r\n              className=\"w-full h-full object-contain\"\r\n              style={{ imageRendering: \"pixelated\" }}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex-1\">\r\n          {showLink && (\r\n            <div className=\"text-sm text-gray-700 break-words\">\r\n              <div className=\"font-medium\">Profile Link</div>\r\n              <a\r\n                href={value}\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n                className=\"text-xs text-indigo-600 underline\"\r\n              >\r\n                {value}\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {showActions && (\r\n            <div className=\"mt-2 flex items-center gap-2\">\r\n              {showDownload && (\r\n                <button\r\n                  onClick={handleDownload}\r\n                  className=\"px-3 py-1 bg-gray-100 border rounded text-sm hover:bg-gray-200\"\r\n                  type=\"button\"\r\n                  aria-label=\"Download QR\"\r\n                >\r\n                  Download QR\r\n                </button>\r\n              )}\r\n\r\n              {showCopy && (\r\n                <button\r\n                  onClick={handleCopy}\r\n                  className=\"px-3 py-1 border rounded text-sm hover:bg-gray-50\"\r\n                  type=\"button\"\r\n                  aria-label=\"Copy link\"\r\n                >\r\n                  Copy Link\r\n                </button>\r\n              )}\r\n\r\n              <button\r\n                onClick={() => window.open(value, \"_blank\", \"noopener\")}\r\n                className=\"px-3 py-1 border rounded text-sm hover:bg-gray-50\"\r\n                type=\"button\"\r\n                aria-label=\"Open link\"\r\n              >\r\n                Open\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {error && <div className=\"text-xs text-red-500 mt-2\">{error}</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}