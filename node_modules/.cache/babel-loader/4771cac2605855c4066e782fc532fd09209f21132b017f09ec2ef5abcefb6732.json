{"ast":null,"code":"// src/services/airportService.js\n// Full English-only Airport CRUD service.\n\nimport { loadAirportsFromStorage, saveAirportsToStorage } from \"../utils/airports\";\nfunction generateId(prefix = \"\") {\n  return prefix + Math.random().toString(36).slice(2, 9);\n}\nexport function getAllCountries() {\n  return loadAirportsFromStorage();\n}\nexport function searchAirports(query) {\n  const q = (query || \"\").trim().toLowerCase();\n  if (!q) return [];\n  const data = loadAirportsFromStorage();\n  const results = [];\n  data.forEach(country => {\n    if (country.country.toLowerCase().includes(q)) {\n      country.airports.forEach(a => results.push({\n        ...a,\n        country: country.country\n      }));\n    } else {\n      country.airports.forEach(a => {\n        if (a.name.toLowerCase().includes(q) || a.iata.toLowerCase().includes(q)) {\n          results.push({\n            ...a,\n            country: country.country\n          });\n        }\n      });\n    }\n  });\n  return results;\n}\nexport function addCountry({\n  country\n}) {\n  const data = loadAirportsFromStorage();\n  const newItem = {\n    id: generateId(\"country-\"),\n    country,\n    airports: []\n  };\n  data.push(newItem);\n  saveAirportsToStorage(data);\n  return newItem;\n}\nexport function updateCountry(id, {\n  country\n}) {\n  const data = loadAirportsFromStorage();\n  const index = data.findIndex(c => c.id === id);\n  if (index === -1) return null;\n  data[index].country = country;\n  saveAirportsToStorage(data);\n  return data[index];\n}\nexport function deleteCountry(id) {\n  let data = loadAirportsFromStorage();\n  data = data.filter(c => c.id !== id);\n  saveAirportsToStorage(data);\n  return true;\n}\nexport function addAirportToCountry(countryId, {\n  name,\n  iata\n}) {\n  const data = loadAirportsFromStorage();\n  const country = data.find(c => c.id === countryId);\n  if (!country) return null;\n  const airport = {\n    id: generateId(\"ap-\"),\n    name,\n    iata: iata.toUpperCase()\n  };\n  country.airports.push(airport);\n  saveAirportsToStorage(data);\n  return airport;\n}\nexport function updateAirport(countryId, airportId, {\n  name,\n  iata\n}) {\n  const data = loadAirportsFromStorage();\n  const country = data.find(c => c.id === countryId);\n  if (!country) return null;\n  const airport = country.airports.find(a => a.id === airportId);\n  if (!airport) return null;\n  airport.name = name;\n  airport.iata = iata.toUpperCase();\n  saveAirportsToStorage(data);\n  return airport;\n}\nexport function deleteAirport(countryId, airportId) {\n  const data = loadAirportsFromStorage();\n  const country = data.find(c => c.id === countryId);\n  if (!country) return false;\n  country.airports = country.airports.filter(a => a.id !== airportId);\n  saveAirportsToStorage(data);\n  return true;\n}","map":{"version":3,"names":["loadAirportsFromStorage","saveAirportsToStorage","generateId","prefix","Math","random","toString","slice","getAllCountries","searchAirports","query","q","trim","toLowerCase","data","results","forEach","country","includes","airports","a","push","name","iata","addCountry","newItem","id","updateCountry","index","findIndex","c","deleteCountry","filter","addAirportToCountry","countryId","find","airport","toUpperCase","updateAirport","airportId","deleteAirport"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/services/airportService.js"],"sourcesContent":["// src/services/airportService.js\r\n// Full English-only Airport CRUD service.\r\n\r\nimport {\r\n  loadAirportsFromStorage,\r\n  saveAirportsToStorage,\r\n} from \"../utils/airports\";\r\n\r\nfunction generateId(prefix = \"\") {\r\n  return prefix + Math.random().toString(36).slice(2, 9);\r\n}\r\n\r\nexport function getAllCountries() {\r\n  return loadAirportsFromStorage();\r\n}\r\n\r\nexport function searchAirports(query) {\r\n  const q = (query || \"\").trim().toLowerCase();\r\n  if (!q) return [];\r\n\r\n  const data = loadAirportsFromStorage();\r\n  const results = [];\r\n\r\n  data.forEach((country) => {\r\n    if (country.country.toLowerCase().includes(q)) {\r\n      country.airports.forEach((a) =>\r\n        results.push({ ...a, country: country.country })\r\n      );\r\n    } else {\r\n      country.airports.forEach((a) => {\r\n        if (\r\n          a.name.toLowerCase().includes(q) ||\r\n          a.iata.toLowerCase().includes(q)\r\n        ) {\r\n          results.push({ ...a, country: country.country });\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  return results;\r\n}\r\n\r\nexport function addCountry({ country }) {\r\n  const data = loadAirportsFromStorage();\r\n  const newItem = { id: generateId(\"country-\"), country, airports: [] };\r\n  data.push(newItem);\r\n  saveAirportsToStorage(data);\r\n  return newItem;\r\n}\r\n\r\nexport function updateCountry(id, { country }) {\r\n  const data = loadAirportsFromStorage();\r\n  const index = data.findIndex((c) => c.id === id);\r\n  if (index === -1) return null;\r\n  data[index].country = country;\r\n  saveAirportsToStorage(data);\r\n  return data[index];\r\n}\r\n\r\nexport function deleteCountry(id) {\r\n  let data = loadAirportsFromStorage();\r\n  data = data.filter((c) => c.id !== id);\r\n  saveAirportsToStorage(data);\r\n  return true;\r\n}\r\n\r\nexport function addAirportToCountry(countryId, { name, iata }) {\r\n  const data = loadAirportsFromStorage();\r\n  const country = data.find((c) => c.id === countryId);\r\n  if (!country) return null;\r\n  const airport = { id: generateId(\"ap-\"), name, iata: iata.toUpperCase() };\r\n  country.airports.push(airport);\r\n  saveAirportsToStorage(data);\r\n  return airport;\r\n}\r\n\r\nexport function updateAirport(countryId, airportId, { name, iata }) {\r\n  const data = loadAirportsFromStorage();\r\n  const country = data.find((c) => c.id === countryId);\r\n  if (!country) return null;\r\n  const airport = country.airports.find((a) => a.id === airportId);\r\n  if (!airport) return null;\r\n  airport.name = name;\r\n  airport.iata = iata.toUpperCase();\r\n  saveAirportsToStorage(data);\r\n  return airport;\r\n}\r\n\r\nexport function deleteAirport(countryId, airportId) {\r\n  const data = loadAirportsFromStorage();\r\n  const country = data.find((c) => c.id === countryId);\r\n  if (!country) return false;\r\n  country.airports = country.airports.filter((a) => a.id !== airportId);\r\n  saveAirportsToStorage(data);\r\n  return true;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}