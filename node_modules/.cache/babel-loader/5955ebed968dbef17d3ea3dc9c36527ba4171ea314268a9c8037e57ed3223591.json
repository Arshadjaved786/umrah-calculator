{"ast":null,"code":"// src/services/airlineService.js\nimport airlinesData from \"../data/airlines.json\";\nconst STORAGE_KEY = \"umrah_app_airlines_v1\";\nfunction readFromStorage() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return null;\n    return JSON.parse(raw);\n  } catch (e) {\n    console.error(\"airlineService: failed to read from localStorage\", e);\n    return null;\n  }\n}\nfunction writeToStorage(data) {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n  } catch (e) {\n    console.error(\"airlineService: failed to write to localStorage\", e);\n  }\n}\nfunction initData() {\n  const stored = readFromStorage();\n  if (stored && Array.isArray(stored)) return stored;\n  // clone default data to avoid accidental mutation\n  const cloned = airlinesData.map(a => ({\n    ...a\n  }));\n  writeToStorage(cloned);\n  return cloned;\n}\nlet airlines = initData();\nexport function getAllAirlines() {\n  // return a shallow copy\n  return [...airlines];\n}\nexport function getAirlineById(id) {\n  return airlines.find(a => a.id === id) || null;\n}\nexport function addAirline({\n  name,\n  code,\n  logo = null\n}) {\n  const id = \"air-\" + Date.now();\n  const newAir = {\n    id,\n    name,\n    code,\n    logo\n  };\n  airlines = [newAir, ...airlines];\n  writeToStorage(airlines);\n  return newAir;\n}\nexport function updateAirline(id, {\n  name,\n  code,\n  logo = null\n}) {\n  airlines = airlines.map(a => a.id === id ? {\n    ...a,\n    name,\n    code,\n    logo\n  } : a);\n  writeToStorage(airlines);\n  return getAirlineById(id);\n}\nexport function removeAirline(id) {\n  const before = airlines.length;\n  airlines = airlines.filter(a => a.id !== id);\n  writeToStorage(airlines);\n  return airlines.length < before;\n}\nexport function resetAirlinesToDefault() {\n  const cloned = airlinesData.map(a => ({\n    ...a\n  }));\n  airlines = cloned;\n  writeToStorage(airlines);\n  return getAllAirlines();\n}","map":{"version":3,"names":["airlinesData","STORAGE_KEY","readFromStorage","raw","localStorage","getItem","JSON","parse","e","console","error","writeToStorage","data","setItem","stringify","initData","stored","Array","isArray","cloned","map","a","airlines","getAllAirlines","getAirlineById","id","find","addAirline","name","code","logo","Date","now","newAir","updateAirline","removeAirline","before","length","filter","resetAirlinesToDefault"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/services/airlineService.js"],"sourcesContent":["// src/services/airlineService.js\r\nimport airlinesData from \"../data/airlines.json\";\r\n\r\nconst STORAGE_KEY = \"umrah_app_airlines_v1\";\r\n\r\nfunction readFromStorage() {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_KEY);\r\n    if (!raw) return null;\r\n    return JSON.parse(raw);\r\n  } catch (e) {\r\n    console.error(\"airlineService: failed to read from localStorage\", e);\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction writeToStorage(data) {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\r\n  } catch (e) {\r\n    console.error(\"airlineService: failed to write to localStorage\", e);\r\n  }\r\n}\r\n\r\nfunction initData() {\r\n  const stored = readFromStorage();\r\n  if (stored && Array.isArray(stored)) return stored;\r\n  // clone default data to avoid accidental mutation\r\n  const cloned = airlinesData.map((a) => ({ ...a }));\r\n  writeToStorage(cloned);\r\n  return cloned;\r\n}\r\n\r\nlet airlines = initData();\r\n\r\nexport function getAllAirlines() {\r\n  // return a shallow copy\r\n  return [...airlines];\r\n}\r\n\r\nexport function getAirlineById(id) {\r\n  return airlines.find((a) => a.id === id) || null;\r\n}\r\n\r\nexport function addAirline({ name, code, logo = null }) {\r\n  const id = \"air-\" + Date.now();\r\n  const newAir = { id, name, code, logo };\r\n  airlines = [newAir, ...airlines];\r\n  writeToStorage(airlines);\r\n  return newAir;\r\n}\r\n\r\nexport function updateAirline(id, { name, code, logo = null }) {\r\n  airlines = airlines.map((a) =>\r\n    a.id === id ? { ...a, name, code, logo } : a\r\n  );\r\n  writeToStorage(airlines);\r\n  return getAirlineById(id);\r\n}\r\n\r\nexport function removeAirline(id) {\r\n  const before = airlines.length;\r\n  airlines = airlines.filter((a) => a.id !== id);\r\n  writeToStorage(airlines);\r\n  return airlines.length < before;\r\n}\r\n\r\nexport function resetAirlinesToDefault() {\r\n  const cloned = airlinesData.map((a) => ({ ...a }));\r\n  airlines = cloned;\r\n  writeToStorage(airlines);\r\n  return getAllAirlines();\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}