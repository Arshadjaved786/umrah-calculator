{"ast":null,"code":"import _objectSpread from\"C:/Users/Taj Tech/Downloads/umrah-calculator/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/services/hotelService.js\nimport localforage from\"localforage\";import makkahData from\"../data/makkahHotels.json\";import madinahData from\"../data/madinahHotels.json\";const store=localforage.createInstance({name:\"umrah_data_store\"});// --- Read functions (use cache if present) ---\nexport async function getMakkahHotels(){let force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{if(!force){const cached=await store.getItem(\"makkah_hotels\");if(cached&&Array.isArray(cached)&&cached.length>0){return cached;}}await store.setItem(\"makkah_hotels\",makkahData);return makkahData;}catch(err){return makkahData;}}export async function getMadinahHotels(){let force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{if(!force){const cached=await store.getItem(\"madinah_hotels\");if(cached&&Array.isArray(cached)&&cached.length>0){return cached;}}await store.setItem(\"madinah_hotels\",madinahData);return madinahData;}catch(err){return madinahData;}}// --- Write helpers: add / update / delete for Makkah ---\nexport async function addMakkahHotel(hotel){try{const list=(await getMakkahHotels())||[];// ensure unique id\nconst id=hotel.id||\"mkh-\".concat(Date.now());const next=[...list,_objectSpread(_objectSpread({},hotel),{},{id})];await store.setItem(\"makkah_hotels\",next);return{ok:true,hotel:_objectSpread(_objectSpread({},hotel),{},{id})};}catch(err){return{ok:false,error:err};}}export async function updateMakkahHotel(id,patch){try{const list=(await getMakkahHotels())||[];const next=list.map(h=>h.id===id?_objectSpread(_objectSpread({},h),patch):h);await store.setItem(\"makkah_hotels\",next);return{ok:true};}catch(err){return{ok:false,error:err};}}export async function deleteMakkahHotel(id){try{const list=(await getMakkahHotels())||[];const next=list.filter(h=>h.id!==id);await store.setItem(\"makkah_hotels\",next);return{ok:true};}catch(err){return{ok:false,error:err};}}// --- Write helpers: add / update / delete for Madinah ---\nexport async function addMadinahHotel(hotel){try{const list=(await getMadinahHotels())||[];const id=hotel.id||\"mdn-\".concat(Date.now());const next=[...list,_objectSpread(_objectSpread({},hotel),{},{id})];await store.setItem(\"madinah_hotels\",next);return{ok:true,hotel:_objectSpread(_objectSpread({},hotel),{},{id})};}catch(err){return{ok:false,error:err};}}export async function updateMadinahHotel(id,patch){try{const list=(await getMadinahHotels())||[];const next=list.map(h=>h.id===id?_objectSpread(_objectSpread({},h),patch):h);await store.setItem(\"madinah_hotels\",next);return{ok:true};}catch(err){return{ok:false,error:err};}}export async function deleteMadinahHotel(id){try{const list=(await getMadinahHotels())||[];const next=list.filter(h=>h.id!==id);await store.setItem(\"madinah_hotels\",next);return{ok:true};}catch(err){return{ok:false,error:err};}}// --- Cache utilities ---\nexport async function clearHotelCache(){try{await store.removeItem(\"makkah_hotels\");await store.removeItem(\"madinah_hotels\");return true;}catch(err){return false;}}","map":{"version":3,"names":["localforage","makkahData","madinahData","store","createInstance","name","getMakkahHotels","force","arguments","length","undefined","cached","getItem","Array","isArray","setItem","err","getMadinahHotels","addMakkahHotel","hotel","list","id","concat","Date","now","next","_objectSpread","ok","error","updateMakkahHotel","patch","map","h","deleteMakkahHotel","filter","addMadinahHotel","updateMadinahHotel","deleteMadinahHotel","clearHotelCache","removeItem"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/services/hotelService.js"],"sourcesContent":["// src/services/hotelService.js\r\nimport localforage from \"localforage\";\r\nimport makkahData from \"../data/makkahHotels.json\";\r\nimport madinahData from \"../data/madinahHotels.json\";\r\n\r\nconst store = localforage.createInstance({\r\n  name: \"umrah_data_store\",\r\n});\r\n\r\n// --- Read functions (use cache if present) ---\r\nexport async function getMakkahHotels(force = false) {\r\n  try {\r\n    if (!force) {\r\n      const cached = await store.getItem(\"makkah_hotels\");\r\n      if (cached && Array.isArray(cached) && cached.length > 0) {\r\n        return cached;\r\n      }\r\n    }\r\n    await store.setItem(\"makkah_hotels\", makkahData);\r\n    return makkahData;\r\n  } catch (err) {\r\n    return makkahData;\r\n  }\r\n}\r\n\r\nexport async function getMadinahHotels(force = false) {\r\n  try {\r\n    if (!force) {\r\n      const cached = await store.getItem(\"madinah_hotels\");\r\n      if (cached && Array.isArray(cached) && cached.length > 0) {\r\n        return cached;\r\n      }\r\n    }\r\n    await store.setItem(\"madinah_hotels\", madinahData);\r\n    return madinahData;\r\n  } catch (err) {\r\n    return madinahData;\r\n  }\r\n}\r\n\r\n// --- Write helpers: add / update / delete for Makkah ---\r\nexport async function addMakkahHotel(hotel) {\r\n  try {\r\n    const list = (await getMakkahHotels()) || [];\r\n    // ensure unique id\r\n    const id = hotel.id || `mkh-${Date.now()}`;\r\n    const next = [...list, { ...hotel, id }];\r\n    await store.setItem(\"makkah_hotels\", next);\r\n    return { ok: true, hotel: { ...hotel, id } };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function updateMakkahHotel(id, patch) {\r\n  try {\r\n    const list = (await getMakkahHotels()) || [];\r\n    const next = list.map((h) => (h.id === id ? { ...h, ...patch } : h));\r\n    await store.setItem(\"makkah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function deleteMakkahHotel(id) {\r\n  try {\r\n    const list = (await getMakkahHotels()) || [];\r\n    const next = list.filter((h) => h.id !== id);\r\n    await store.setItem(\"makkah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\n// --- Write helpers: add / update / delete for Madinah ---\r\nexport async function addMadinahHotel(hotel) {\r\n  try {\r\n    const list = (await getMadinahHotels()) || [];\r\n    const id = hotel.id || `mdn-${Date.now()}`;\r\n    const next = [...list, { ...hotel, id }];\r\n    await store.setItem(\"madinah_hotels\", next);\r\n    return { ok: true, hotel: { ...hotel, id } };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function updateMadinahHotel(id, patch) {\r\n  try {\r\n    const list = (await getMadinahHotels()) || [];\r\n    const next = list.map((h) => (h.id === id ? { ...h, ...patch } : h));\r\n    await store.setItem(\"madinah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\nexport async function deleteMadinahHotel(id) {\r\n  try {\r\n    const list = (await getMadinahHotels()) || [];\r\n    const next = list.filter((h) => h.id !== id);\r\n    await store.setItem(\"madinah_hotels\", next);\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false, error: err };\r\n  }\r\n}\r\n\r\n// --- Cache utilities ---\r\nexport async function clearHotelCache() {\r\n  try {\r\n    await store.removeItem(\"makkah_hotels\");\r\n    await store.removeItem(\"madinah_hotels\");\r\n    return true;\r\n  } catch (err) {\r\n    return false;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}