{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Taj Tech\\\\Downloads\\\\umrah-calculator\\\\src\\\\pages\\\\UmrahCalculator.jsx\",\n  _s = $RefreshSig$();\n// src/pages/UmrahCalculator.jsx\nimport React, { useState, useEffect, useMemo, useRef } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport { getMakkahHotels, getMadinahHotels, clearHotelCache } from \"../services/hotelService\";\nimport { useApp } from \"../contexts/AppContext\";\nimport AgencyForm from \"../components/AgencyForm\";\nimport HotelCard from \"../components/HotelCard\";\nimport HotelManager from \"../components/HotelManager\";\nimport TicketsVisa from \"../components/TicketsVisa\";\nimport Summary from \"../components/Summary\";\nimport SavedPackages from \"../components/SavedPackages\";\nimport Footer from \"../components/Footer\";\nimport { savePackage as savePkgService, listPackages } from \"../services/packageService\";\n\n/**\r\n * UmrahCalculator page\r\n * - includes new filters UI for hotels (Makkah + Madinah)\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UmrahCalculator() {\n  _s();\n  const {\n    agency\n  } = useApp();\n  const [showAgencyForm, setShowAgencyForm] = useState(!agency);\n  useEffect(() => {\n    setShowAgencyForm(!agency);\n  }, [agency]);\n\n  // MAIN hotel states\n  const [makkah, setMakkah] = useState({\n    name: \"\",\n    nights: 3,\n    pricePerNight: 0,\n    soldOut: false,\n    weekendNights: 0,\n    weekendPrice: \"\"\n  });\n  const [madinah, setMadinah] = useState({\n    name: \"\",\n    nights: 2,\n    pricePerNight: 0,\n    soldOut: false,\n    weekendNights: 0,\n    weekendPrice: \"\"\n  });\n  const [makkahList, setMakkahList] = useState([]);\n  const [madinahList, setMadinahList] = useState([]);\n  const [loadingHotels, setLoadingHotels] = useState(true);\n  const [makkahQuery, setMakkahQuery] = useState(\"\");\n  const [madinahQuery, setMadinahQuery] = useState(\"\");\n  const [managerOpen, setManagerOpen] = useState(false);\n\n  // --- NEW: filters state for each city (supports multi-filter) ---\n  const [makkahFilters, setMakkahFilters] = useState({\n    star: \"all\",\n    // all / 5 /4 /3 /2 /1\n    maxPrice: \"\",\n    maxDistance: \"\",\n    // in meters (user types number)\n    sortBy: \"relevance\" // relevance / price / distance / stars\n  });\n  const [madinahFilters, setMadinahFilters] = useState({\n    star: \"all\",\n    maxPrice: \"\",\n    maxDistance: \"\",\n    sortBy: \"relevance\"\n  });\n\n  // custom dropdown UI state (for Makkah + Madinah search results)\n  const [makkahShowList, setMakkahShowList] = useState(false);\n  const [madinahShowList, setMadinahShowList] = useState(false);\n  const makkahRef = useRef(null);\n  const madinahRef = useRef(null);\n\n  // keyboard focus index for dropdown items\n  const [makkahFocus, setMakkahFocus] = useState(-1);\n  const [madinahFocus, setMadinahFocus] = useState(-1);\n\n  // --- close dropdowns when clicking outside ---\n  useEffect(() => {\n    function onDocClick(e) {\n      if (makkahRef.current && !makkahRef.current.contains(e.target)) {\n        setMakkahShowList(false);\n      }\n      if (madinahRef.current && !madinahRef.current.contains(e.target)) {\n        setMadinahShowList(false);\n      }\n    }\n    document.addEventListener(\"click\", onDocClick);\n    return () => document.removeEventListener(\"click\", onDocClick);\n  }, []);\n\n  // ticket / pax / profit states\n  const [pax, setPax] = useState(1);\n  const [ticketPrice, setTicketPrice] = useState(0);\n  const [ticketCurrency, setTicketCurrency] = useState(\"SAR\");\n  // selected airline and vehicle lifted to parent so we can save them in package snapshot\n  const [selectedAirline, setSelectedAirline] = useState(null);\n  const [vehicle, setVehicle] = useState(\"CAR\");\n\n  // NEW: profit amount + currency\n  const [profit, setProfit] = useState(0);\n  const [profitCurrency, setProfitCurrency] = useState(\"SAR\");\n  const [rates, setRates] = useLocalStorage(\"umrah_rates\", {\n    SAR_to_PKR: 75,\n    USD_to_SAR: 3.75\n  });\n\n  // keep default visa SAR (user can edit it)\n  const [defaultVisaSAR, setDefaultVisaSAR] = useLocalStorage(\"umrah_defaultVisaSAR\", 300);\n\n  // TRANSPORT total\n  const [transportTotal, setTransportTotal] = useState(0);\n  const [packages, setPackages] = useLocalStorage(\"umrah_packages\", []);\n\n  // -------------------------\n  // Load hotel lists\n  // -------------------------\n  const loadLists = async () => {\n    setLoadingHotels(true);\n    try {\n      const mList = await getMakkahHotels();\n      const mdList = await getMadinahHotels();\n      // ðŸ”´ FINAL SOURCE OF TRUTH: TripPlanner COUNTED data\n      try {\n        const rawPlan = localStorage.getItem(\"umrah_last_plan\");\n        if (rawPlan) {\n          const plan = JSON.parse(rawPlan);\n          const stays = plan.adjustedStays || (plan.segments || []).filter(s => s.type === \"stay\");\n          const sum = arr => arr.reduce((acc, s) => acc + Number(s.countedDays || 0), 0);\n          const makkahStays = stays.filter(s => s.city === \"makkah\");\n          const madinahStays = stays.filter(s => s.city === \"madinah\");\n          const sumWeekend = arr => arr.reduce((acc, s) => acc + (Array.isArray(s.weekendDates) ? s.weekendDates.length : 0), 0);\n          if (makkahStays.length) {\n            setMakkah(s => ({\n              ...s,\n              nights: sum(makkahStays),\n              weekendNights: sumWeekend(makkahStays)\n            }));\n          }\n          if (madinahStays.length) {\n            setMadinah(s => ({\n              ...s,\n              nights: sum(madinahStays),\n              weekendNights: sumWeekend(madinahStays)\n            }));\n          }\n        }\n      } catch (e) {\n        console.warn(\"Failed to read counted nights from umrah_last_plan\", e);\n      }\n      setMakkahList(mList || []);\n      setMadinahList(mdList || []);\n      if ((!makkah.name || makkah.name === \"\") && mList.length > 0) {\n        const first = mList[0];\n        setMakkah(s => ({\n          ...s,\n          name: first.name,\n          pricePerNight: first.pricePerNight\n        }));\n      }\n      if ((!madinah.name || madinah.name === \"\") && mdList.length > 0) {\n        const first = mdList[0];\n        setMadinah(s => ({\n          ...s,\n          name: first.name,\n          pricePerNight: first.pricePerNight\n        }));\n      }\n    } finally {\n      setLoadingHotels(false);\n    }\n  };\n  useEffect(() => {\n    loadLists();\n  }, []);\n\n  // ---------------------------------------------------\n  // Filters function (now accepts filters object)\n  // ---------------------------------------------------\n  function parseDistanceToMeters(dist) {\n    // expected formats: \"350m\", \"1.2 km\", \"1200 m\", \"0.5km\"\n    if (!dist) return null;\n    const s = String(dist).trim().toLowerCase();\n    const num = parseFloat(s.replace(\",\", \".\").replace(/[^\\d.]/g, \"\"));\n    if (s.includes(\"km\")) return Math.round(num * 1000);\n    if (s.includes(\"m\")) return Math.round(num);\n    // fallback treat as meters if numeric\n    if (!Number.isNaN(num)) return Math.round(num);\n    return null;\n  }\n  const filterHotels = (list, query, filters) => {\n    const q = (query || \"\").trim().toLowerCase();\n\n    // pre-calc numeric filters\n    const maxPrice = filters && filters.maxPrice !== \"\" ? Number(filters.maxPrice) : null;\n    const maxDistance = filters && filters.maxDistance !== \"\" ? Number(filters.maxDistance) : null;\n    const starFilter = filters && filters.star ? filters.star : \"all\";\n    let out = (list || []).filter(h => {\n      // star filter\n      if (starFilter !== \"all\") {\n        if (String(h.stars) !== String(starFilter)) return false;\n      }\n\n      // price filter (if hotel has pricePerNight field)\n      if (maxPrice !== null && h.pricePerNight !== undefined && h.pricePerNight !== \"\") {\n        if (Number(h.pricePerNight) > maxPrice) return false;\n      }\n\n      // distance filter\n      if (maxDistance !== null && h.distance) {\n        const d = parseDistanceToMeters(h.distance);\n        if (d !== null && d > maxDistance) return false;\n      }\n\n      // query matching (name or distance)\n      if (!q) return true;\n      if (h.name && h.name.toLowerCase().includes(q)) return true;\n      if (h.distance && String(h.distance).toLowerCase().includes(q)) return true;\n      return false;\n    });\n\n    // sorting\n    if (filters && filters.sortBy && filters.sortBy !== \"relevance\") {\n      if (filters.sortBy === \"price\") {\n        out = out.sort((a, b) => Number(a.pricePerNight || 0) - Number(b.pricePerNight || 0));\n      } else if (filters.sortBy === \"distance\") {\n        out = out.sort((a, b) => {\n          const da = parseDistanceToMeters(a.distance) || 0;\n          const db = parseDistanceToMeters(b.distance) || 0;\n          return da - db;\n        });\n      } else if (filters.sortBy === \"stars\") {\n        out = out.sort((a, b) => Number(b.stars || 0) - Number(a.stars || 0));\n      }\n    }\n    return out;\n  };\n  const filteredMakkah = useMemo(() => filterHotels(makkahList, makkahQuery, makkahFilters), [makkahList, makkahQuery, makkahFilters]);\n  const filteredMadinah = useMemo(() => filterHotels(madinahList, madinahQuery, madinahFilters), [madinahList, madinahQuery, madinahFilters]);\n\n  // --- Keyboard + dropdown helpers (same as before) ---\n  useEffect(() => {\n    if (!makkahShowList) setMakkahFocus(-1);\n  }, [makkahShowList, filteredMakkah]);\n  useEffect(() => {\n    if (!madinahShowList) setMadinahFocus(-1);\n  }, [madinahShowList, filteredMadinah]);\n  function selectMakkahByIndex(i) {\n    const h = filteredMakkah[i];\n    if (!h) return;\n    setMakkah(s => ({\n      ...s,\n      name: h.name,\n      pricePerNight: h.pricePerNight\n    }));\n    setMakkahQuery(`${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`);\n    setMakkahShowList(false);\n    setMakkahFocus(-1);\n  }\n  function selectMadinahByIndex(i) {\n    const h = filteredMadinah[i];\n    if (!h) return;\n    setMadinah(s => ({\n      ...s,\n      name: h.name,\n      pricePerNight: h.pricePerNight\n    }));\n    setMadinahQuery(`${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`);\n    setMadinahShowList(false);\n    setMadinahFocus(-1);\n  }\n  function handleMakkahKeyDown(e) {\n    if (e.key === \"ArrowDown\") {\n      e.preventDefault();\n      setMakkahShowList(true);\n      setMakkahFocus(prev => {\n        if (filteredMakkah.length === 0) return -1;\n        if (prev === -1) return 0;\n        return Math.min(prev + 1, filteredMakkah.length - 1);\n      });\n      return;\n    }\n    if (e.key === \"ArrowUp\") {\n      e.preventDefault();\n      setMakkahFocus(prev => {\n        if (filteredMakkah.length === 0) return -1;\n        if (prev <= 0) return 0;\n        return prev - 1;\n      });\n      return;\n    }\n    if (e.key === \"Enter\") {\n      if (makkahFocus >= 0) {\n        e.preventDefault();\n        selectMakkahByIndex(makkahFocus);\n      }\n      return;\n    }\n    if (e.key === \"Escape\") {\n      setMakkahShowList(false);\n      setMakkahFocus(-1);\n      return;\n    }\n  }\n  function handleMadinahKeyDown(e) {\n    if (e.key === \"ArrowDown\") {\n      e.preventDefault();\n      setMadinahShowList(true);\n      setMadinahFocus(prev => {\n        if (filteredMadinah.length === 0) return -1;\n        if (prev === -1) return 0;\n        return Math.min(prev + 1, filteredMadinah.length - 1);\n      });\n      return;\n    }\n    if (e.key === \"ArrowUp\") {\n      e.preventDefault();\n      setMadinahFocus(prev => {\n        if (filteredMadinah.length === 0) return -1;\n        if (prev <= 0) return 0;\n        return prev - 1;\n      });\n      return;\n    }\n    if (e.key === \"Enter\") {\n      if (madinahFocus >= 0) {\n        e.preventDefault();\n        selectMadinahByIndex(madinahFocus);\n      }\n      return;\n    }\n    if (e.key === \"Escape\") {\n      setMadinahShowList(false);\n      setMadinahFocus(-1);\n      return;\n    }\n  }\n  useEffect(() => {\n    if (makkahFocus >= 0) {\n      const el = document.getElementById(`makkah-item-${makkahFocus}`);\n      if (el) el.scrollIntoView({\n        block: \"nearest\"\n      });\n    }\n  }, [makkahFocus]);\n  useEffect(() => {\n    if (madinahFocus >= 0) {\n      const el = document.getElementById(`madinah-item-${madinahFocus}`);\n      if (el) el.scrollIntoView({\n        block: \"nearest\"\n      });\n    }\n  }, [madinahFocus]);\n\n  // price calculation\n  const makkahNights = Number(makkah.nights) || 0;\n  const makkahPrice = Number(makkah.pricePerNight) || 0;\n  const madinahNights = Number(madinah.nights) || 0;\n  const madinahPrice = Number(madinah.pricePerNight) || 0;\n  const makTotal = makkahNights * makkahPrice;\n  const madTotal = madinahNights * madinahPrice;\n  const ticketPriceInSAR = ticketCurrency === \"USD\" ? ticketPrice * rates.USD_to_SAR : ticketCurrency === \"PKR\" ? ticketPrice / rates.SAR_to_PKR : ticketPrice;\n  const visaSAR = Number(defaultVisaSAR) || 0;\n  const _profit = Number(profit) || 0;\n  let profitInSAR = 0;\n  if (_profit > 0) {\n    if (profitCurrency === \"SAR\") {\n      profitInSAR = _profit;\n    } else if (profitCurrency === \"USD\") {\n      profitInSAR = _profit * Number(rates.USD_to_SAR || 3.75);\n    } else if (profitCurrency === \"PKR\") {\n      profitInSAR = _profit / Number(rates.SAR_to_PKR || 75);\n    }\n  }\n  const perPersonTotalSAR = (Number(makTotal) || 0) + (Number(madTotal) || 0) + (Number(ticketPriceInSAR) || 0) + (Number(visaSAR) || 0) + (Number(transportTotal) || 0) + (Number(profitInSAR) || 0);\n  const totalSAR = perPersonTotalSAR * Math.max(1, Number(pax || 1));\n  const totalPKR = totalSAR * Number(rates.SAR_to_PKR || 75);\n  const totalUSD = totalSAR / Number(rates.USD_to_SAR || 3.75);\n\n  // ---------------------------------------------------\n  // When user selects a hotel from dropdown (not used by new filters)\n  // ---------------------------------------------------\n  const handleSelectMakkah = e => {\n    const id = e.target.value;\n    const h = makkahList.find(x => x.id === id);\n    if (h) {\n      setMakkah(s => ({\n        ...s,\n        name: h.name,\n        pricePerNight: h.pricePerNight\n      }));\n    }\n  };\n  const handleSelectMadinah = e => {\n    const id = e.target.value;\n    const h = madinahList.find(x => x.id === id);\n    if (h) {\n      setMadinah(s => ({\n        ...s,\n        name: h.name,\n        pricePerNight: h.pricePerNight\n      }));\n    }\n  };\n\n  // ---------------------------------------------------\n  // SAVE PACKAGE (upgraded -> consolidated snapshot)\n  // ---------------------------------------------------\n  const savePackage = () => {\n    try {\n      // Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚº Ù¾ÛÙ„Û’ TripPlanner Ú©ÛŒ saved itinerary Ù„ÛŒÚº (Ø§Ú¯Ø± Ù…ÙˆØ¬ÙˆØ¯ ÛÙˆ)\n      let itinerary = null;\n      try {\n        const raw = localStorage.getItem(\"umrah_last_plan\");\n        if (raw) itinerary = JSON.parse(raw);\n      } catch (e) {\n        itinerary = null;\n      }\n\n      // build consolidated snapshot\n      const snapshot = {\n        // meta will be filled by packageService (id, createdAt)\n        agency: agency || null,\n        itinerary: itinerary || null,\n        hotelsSelected: {\n          makkah: {\n            ...makkah\n          },\n          madinah: {\n            ...madinah\n          }\n        },\n        flights: {\n          ticketPrice: ticketPrice || 0,\n          ticketCurrency: ticketCurrency || \"SAR\",\n          selectedAirline: selectedAirline || null // â­ FIXED: airline saving\n        },\n        visa: {\n          visaSAR: Number(defaultVisaSAR || 0),\n          type: \"e-visa\" // â­ FIXED: always show e-visa\n        },\n        transport: {\n          transportTotal: Number(transportTotal || 0),\n          vehicle: vehicle || \"\" // â­ FIXED: vehicle saving\n        },\n        pax: Number(pax || 1),\n        profit: Number(profit || 0),\n        profitCurrency: profitCurrency || \"SAR\",\n        totals: {\n          SAR: Number(totalSAR || 0),\n          PKR: Number(totalPKR || 0),\n          USD: Number(totalUSD || 0)\n        }\n      };\n\n      // call packageService to save (it will add id + createdAt)\n      const saved = savePkgService(snapshot);\n      if (saved) {\n        // update local state (packages) so UI reflects saved package\n        setPackages(prev => [saved, ...(prev || [])]);\n        alert(\"Package saved!\");\n      } else {\n        alert(\"Failed to save package. Check browser storage.\");\n      }\n    } catch (err) {\n      console.error(\"savePackage error\", err);\n      alert(\"Saving failed. See console for error.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full min-h-screen bg-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"w-full px-3 md:px-6 py-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-12 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"lg:col-span-6 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl p-4 shadow-sm border-l-4 border-pink-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-lg mb-3\",\n              children: \"Makkah Hotels\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-gray-50 border rounded mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex flex-col gap-2 md:flex-row md:items-center\",\n                ref: makkahRef,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  value: makkahQuery,\n                  onChange: e => {\n                    const q = e.target.value || \"\";\n                    setMakkahQuery(q);\n                    setMakkahShowList(true);\n                    const match = filteredMakkah.find(h => `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` === q.trim()) || null;\n                    if (match) {\n                      setMakkah(s => ({\n                        ...s,\n                        name: match.name,\n                        pricePerNight: match.pricePerNight\n                      }));\n                      setMakkahShowList(false);\n                    }\n                  },\n                  onKeyDown: e => {\n                    handleMakkahKeyDown(e);\n                    if (e.key === \"Enter\" && makkahFocus < 0) {\n                      const q = (makkahQuery || \"\").trim();\n                      const match = filteredMakkah.find(h => `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` === q) || filteredMakkah[0] || null;\n                      if (match) {\n                        setMakkah(s => ({\n                          ...s,\n                          name: match.name,\n                          pricePerNight: match.pricePerNight\n                        }));\n                        setMakkahShowList(false);\n                      }\n                    }\n                  },\n                  placeholder: \"Search & select hotel...\",\n                  className: \"w-full p-2 border rounded text-sm\",\n                  onFocus: () => setMakkahShowList(true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-2 w-full md:w-auto\",\n                  children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                    value: makkahFilters.star,\n                    onChange: e => setMakkahFilters(s => ({\n                      ...s,\n                      star: e.target.value\n                    })),\n                    className: \"p-2 border rounded text-sm bg-white\",\n                    title: \"Filter by stars\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"all\",\n                      children: \"All \\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 626,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"5\",\n                      children: \"5\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 627,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"4\",\n                      children: \"4\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 628,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"3\",\n                      children: \"3\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 629,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"2\",\n                      children: \"2\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 630,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"1\",\n                      children: \"1\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 631,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 615,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"Max price\",\n                    value: makkahFilters.maxPrice,\n                    onChange: e => setMakkahFilters(s => ({\n                      ...s,\n                      maxPrice: e.target.value\n                    })),\n                    className: \"p-2 border rounded w-full md:w-24 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 634,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"Max m\",\n                    value: makkahFilters.maxDistance,\n                    onChange: e => setMakkahFilters(s => ({\n                      ...s,\n                      maxDistance: e.target.value\n                    })),\n                    className: \"p-2 border rounded w-full md:w-20 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: makkahFilters.sortBy,\n                    onChange: e => setMakkahFilters(s => ({\n                      ...s,\n                      sortBy: e.target.value\n                    })),\n                    className: \"p-2 border rounded text-sm bg-white\",\n                    title: \"Sort by\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"relevance\",\n                      children: \"Relevance\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 671,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"price\",\n                      children: \"Price \\u2191\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 672,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"distance\",\n                      children: \"Distance \\u2191\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 673,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"stars\",\n                      children: \"Stars \\u2193\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 674,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 660,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 614,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setManagerOpen(true),\n                  className: \"px-3 py-2 border rounded text-sm bg-white w-full md:w-auto md:ml-2\",\n                  type: \"button\",\n                  children: \"Add\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 17\n              }, this), makkahShowList && filteredMakkah.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute left-0 right-0 mt-2 bg-white border rounded max-h-64 overflow-auto shadow z-30 md:left-0 md:right-auto md:min-w-[450px]\",\n                children: filteredMakkah.map((h, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  id: `makkah-item-${index}`,\n                  type: \"button\",\n                  onClick: () => {\n                    setMakkah(s => ({\n                      ...s,\n                      name: h.name,\n                      pricePerNight: h.pricePerNight\n                    }));\n                    setMakkahQuery(`${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`);\n                    setMakkahShowList(false);\n                    setMakkahFocus(-1);\n                  },\n                  onMouseEnter: () => setMakkahFocus(index),\n                  className: `w-full text-left px-3 py-2 flex items-start gap-3 ${index === makkahFocus ? \"bg-indigo-50\" : \"hover:bg-gray-50\"}`,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-medium text-sm\",\n                      children: h.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 715,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-500\",\n                      children: [h.stars, \"\\u2605 \\u2014 \", h.distance, \" \\u2014 SAR \", h.pricePerNight]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 716,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 714,\n                    columnNumber: 25\n                  }, this)\n                }, h.id || index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 691,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(HotelCard, {\n              title: \"\",\n              hotel: makkah,\n              setHotel: setMakkah\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl p-4 shadow-sm border-l-4 border-emerald-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-lg mb-3\",\n              children: \"Madinah Hotels\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-gray-50 border rounded mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex flex-col gap-2 md:flex-row md:items-center\",\n                ref: madinahRef,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  value: madinahQuery,\n                  onChange: e => {\n                    const q = e.target.value || \"\";\n                    setMadinahQuery(q);\n                    setMadinahShowList(true);\n                    const match = filteredMadinah.find(h => `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` === q.trim()) || null;\n                    if (match) {\n                      setMadinah(s => ({\n                        ...s,\n                        name: match.name,\n                        pricePerNight: match.pricePerNight\n                      }));\n                      setMadinahShowList(false);\n                    }\n                  },\n                  onKeyDown: e => {\n                    handleMadinahKeyDown(e);\n                    if (e.key === \"Enter\" && madinahFocus < 0) {\n                      const q = (madinahQuery || \"\").trim();\n                      const match = filteredMadinah.find(h => `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` === q) || filteredMadinah[0] || null;\n                      if (match) {\n                        setMadinah(s => ({\n                          ...s,\n                          name: match.name,\n                          pricePerNight: match.pricePerNight\n                        }));\n                        setMadinahShowList(false);\n                      }\n                    }\n                  },\n                  placeholder: \"Search & select hotel...\",\n                  className: \"w-full p-2 border rounded text-sm\",\n                  onFocus: () => setMadinahShowList(true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 739,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-2 w-full md:w-auto\",\n                  children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                    value: madinahFilters.star,\n                    onChange: e => setMadinahFilters(s => ({\n                      ...s,\n                      star: e.target.value\n                    })),\n                    className: \"p-2 border rounded text-sm bg-white\",\n                    title: \"Filter by stars\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"all\",\n                      children: \"All \\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 800,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"5\",\n                      children: \"5\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 801,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"4\",\n                      children: \"4\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 802,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"3\",\n                      children: \"3\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 803,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"2\",\n                      children: \"2\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 804,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"1\",\n                      children: \"1\\u2605\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 805,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 789,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"Max price\",\n                    value: madinahFilters.maxPrice,\n                    onChange: e => setMadinahFilters(s => ({\n                      ...s,\n                      maxPrice: e.target.value\n                    })),\n                    className: \"p-2 border rounded w-24 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 808,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"Max m\",\n                    value: madinahFilters.maxDistance,\n                    onChange: e => setMadinahFilters(s => ({\n                      ...s,\n                      maxDistance: e.target.value\n                    })),\n                    className: \"p-2 border rounded w-20 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 821,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: madinahFilters.sortBy,\n                    onChange: e => setMadinahFilters(s => ({\n                      ...s,\n                      sortBy: e.target.value\n                    })),\n                    className: \"p-2 border rounded text-sm bg-white\",\n                    title: \"Sort by\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"relevance\",\n                      children: \"Relevance\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 845,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"price\",\n                      children: \"Price \\u2191\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 846,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"distance\",\n                      children: \"Distance \\u2191\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 847,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"stars\",\n                      children: \"Stars \\u2193\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 848,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 788,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setManagerOpen(true),\n                  className: \"ml-2 px-2 py-1 border rounded text-sm bg-white\",\n                  type: \"button\",\n                  children: \"Add\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 852,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 17\n              }, this), madinahShowList && filteredMadinah.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute left-4 right-4 mt-16 bg-white border rounded max-h-64 overflow-auto shadow z-30 md:left-0 md:right-auto md:min-w-[450px]\",\n                children: filteredMadinah.map((h, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  id: `madinah-item-${index}`,\n                  type: \"button\",\n                  onClick: () => {\n                    setMadinah(s => ({\n                      ...s,\n                      name: h.name,\n                      pricePerNight: h.pricePerNight\n                    }));\n                    setMadinahQuery(`${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`);\n                    setMadinahShowList(false);\n                    setMadinahFocus(-1);\n                  },\n                  onMouseEnter: () => setMadinahFocus(index),\n                  className: `w-full text-left px-3 py-2 flex items-start gap-3 ${index === madinahFocus ? \"bg-indigo-50\" : \"hover:bg-gray-50\"}`,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-medium text-sm\",\n                      children: h.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 889,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-500\",\n                      children: [h.stars, \"\\u2605 \\u2014 \", h.distance, \" \\u2014 SAR \", h.pricePerNight]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 890,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 888,\n                    columnNumber: 25\n                  }, this)\n                }, h.id || index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 865,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 863,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 734,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(HotelCard, {\n              title: \"\",\n              hotel: madinah,\n              setHotel: setMadinah\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 900,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-6 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(TicketsVisa, {\n            pax: pax,\n            setPax: setPax,\n            ticketPrice: ticketPrice,\n            setTicketPrice: setTicketPrice,\n            ticketCurrency: ticketCurrency,\n            setTicketCurrency: setTicketCurrency,\n            defaultVisaSAR: defaultVisaSAR,\n            setDefaultVisaSAR: setDefaultVisaSAR,\n            transportTotal: transportTotal,\n            setTransportTotal: setTransportTotal,\n            rates: rates,\n            setRates: setRates,\n            profit: profit,\n            setProfit: setProfit,\n            profitCurrency: profitCurrency,\n            setProfitCurrency: setProfitCurrency,\n            selectedAirline: selectedAirline,\n            setSelectedAirline: setSelectedAirline,\n            vehicle: vehicle,\n            setVehicle: setVehicle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 906,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Summary, {\n            perPersonTotalSAR: perPersonTotalSAR,\n            totalSAR: totalSAR,\n            totalPKR: totalPKR,\n            totalUSD: totalUSD,\n            pax: pax,\n            savePackage: savePackage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 929,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SavedPackages, {\n            packages: packages,\n            setPackages: setPackages\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 938,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 905,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 943,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HotelManager, {\n      open: managerOpen,\n      setOpen: setManagerOpen,\n      makkahList: makkahList,\n      madinahList: madinahList,\n      refreshMakkah: loadLists,\n      refreshMadinah: loadLists\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 946,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 550,\n    columnNumber: 5\n  }, this);\n}\n_s(UmrahCalculator, \"Fvp9p6Hd51zDxdraZB1M44D3Gpg=\", false, function () {\n  return [useApp, useLocalStorage, useLocalStorage, useLocalStorage];\n});\n_c = UmrahCalculator;\nvar _c;\n$RefreshReg$(_c, \"UmrahCalculator\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","v4","uuidv4","useLocalStorage","getMakkahHotels","getMadinahHotels","clearHotelCache","useApp","AgencyForm","HotelCard","HotelManager","TicketsVisa","Summary","SavedPackages","Footer","savePackage","savePkgService","listPackages","jsxDEV","_jsxDEV","UmrahCalculator","_s","agency","showAgencyForm","setShowAgencyForm","makkah","setMakkah","name","nights","pricePerNight","soldOut","weekendNights","weekendPrice","madinah","setMadinah","makkahList","setMakkahList","madinahList","setMadinahList","loadingHotels","setLoadingHotels","makkahQuery","setMakkahQuery","madinahQuery","setMadinahQuery","managerOpen","setManagerOpen","makkahFilters","setMakkahFilters","star","maxPrice","maxDistance","sortBy","madinahFilters","setMadinahFilters","makkahShowList","setMakkahShowList","madinahShowList","setMadinahShowList","makkahRef","madinahRef","makkahFocus","setMakkahFocus","madinahFocus","setMadinahFocus","onDocClick","e","current","contains","target","document","addEventListener","removeEventListener","pax","setPax","ticketPrice","setTicketPrice","ticketCurrency","setTicketCurrency","selectedAirline","setSelectedAirline","vehicle","setVehicle","profit","setProfit","profitCurrency","setProfitCurrency","rates","setRates","SAR_to_PKR","USD_to_SAR","defaultVisaSAR","setDefaultVisaSAR","transportTotal","setTransportTotal","packages","setPackages","loadLists","mList","mdList","rawPlan","localStorage","getItem","plan","JSON","parse","stays","adjustedStays","segments","filter","s","type","sum","arr","reduce","acc","Number","countedDays","makkahStays","city","madinahStays","sumWeekend","Array","isArray","weekendDates","length","console","warn","first","parseDistanceToMeters","dist","String","trim","toLowerCase","num","parseFloat","replace","includes","Math","round","isNaN","filterHotels","list","query","filters","q","starFilter","out","h","stars","undefined","distance","d","sort","a","b","da","db","filteredMakkah","filteredMadinah","selectMakkahByIndex","i","selectMadinahByIndex","handleMakkahKeyDown","key","preventDefault","prev","min","handleMadinahKeyDown","el","getElementById","scrollIntoView","block","makkahNights","makkahPrice","madinahNights","madinahPrice","makTotal","madTotal","ticketPriceInSAR","visaSAR","_profit","profitInSAR","perPersonTotalSAR","totalSAR","max","totalPKR","totalUSD","handleSelectMakkah","id","value","find","x","handleSelectMadinah","itinerary","raw","snapshot","hotelsSelected","flights","visa","transport","totals","SAR","PKR","USD","saved","alert","err","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onChange","match","onKeyDown","placeholder","onFocus","title","onClick","map","index","onMouseEnter","hotel","setHotel","open","setOpen","refreshMakkah","refreshMadinah","_c","$RefreshReg$"],"sources":["C:/Users/Taj Tech/Downloads/umrah-calculator/src/pages/UmrahCalculator.jsx"],"sourcesContent":["// src/pages/UmrahCalculator.jsx\r\nimport React, { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport useLocalStorage from \"../hooks/useLocalStorage\";\r\nimport {\r\n  getMakkahHotels,\r\n  getMadinahHotels,\r\n  clearHotelCache,\r\n} from \"../services/hotelService\";\r\n\r\nimport { useApp } from \"../contexts/AppContext\";\r\n\r\nimport AgencyForm from \"../components/AgencyForm\";\r\nimport HotelCard from \"../components/HotelCard\";\r\nimport HotelManager from \"../components/HotelManager\";\r\nimport TicketsVisa from \"../components/TicketsVisa\";\r\nimport Summary from \"../components/Summary\";\r\nimport SavedPackages from \"../components/SavedPackages\";\r\nimport Footer from \"../components/Footer\";\r\nimport {\r\n  savePackage as savePkgService,\r\n  listPackages,\r\n} from \"../services/packageService\";\r\n\r\n/**\r\n * UmrahCalculator page\r\n * - includes new filters UI for hotels (Makkah + Madinah)\r\n */\r\n\r\nexport default function UmrahCalculator() {\r\n  const { agency } = useApp();\r\n  const [showAgencyForm, setShowAgencyForm] = useState(!agency);\r\n\r\n  useEffect(() => {\r\n    setShowAgencyForm(!agency);\r\n  }, [agency]);\r\n\r\n  // MAIN hotel states\r\n  const [makkah, setMakkah] = useState({\r\n    name: \"\",\r\n    nights: 3,\r\n    pricePerNight: 0,\r\n    soldOut: false,\r\n    weekendNights: 0,\r\n    weekendPrice: \"\",\r\n  });\r\n  const [madinah, setMadinah] = useState({\r\n    name: \"\",\r\n    nights: 2,\r\n    pricePerNight: 0,\r\n    soldOut: false,\r\n    weekendNights: 0,\r\n    weekendPrice: \"\",\r\n  });\r\n\r\n  const [makkahList, setMakkahList] = useState([]);\r\n  const [madinahList, setMadinahList] = useState([]);\r\n  const [loadingHotels, setLoadingHotels] = useState(true);\r\n\r\n  const [makkahQuery, setMakkahQuery] = useState(\"\");\r\n  const [madinahQuery, setMadinahQuery] = useState(\"\");\r\n\r\n  const [managerOpen, setManagerOpen] = useState(false);\r\n\r\n  // --- NEW: filters state for each city (supports multi-filter) ---\r\n  const [makkahFilters, setMakkahFilters] = useState({\r\n    star: \"all\", // all / 5 /4 /3 /2 /1\r\n    maxPrice: \"\",\r\n    maxDistance: \"\", // in meters (user types number)\r\n    sortBy: \"relevance\", // relevance / price / distance / stars\r\n  });\r\n\r\n  const [madinahFilters, setMadinahFilters] = useState({\r\n    star: \"all\",\r\n    maxPrice: \"\",\r\n    maxDistance: \"\",\r\n    sortBy: \"relevance\",\r\n  });\r\n\r\n  // custom dropdown UI state (for Makkah + Madinah search results)\r\n  const [makkahShowList, setMakkahShowList] = useState(false);\r\n  const [madinahShowList, setMadinahShowList] = useState(false);\r\n  const makkahRef = useRef(null);\r\n  const madinahRef = useRef(null);\r\n\r\n  // keyboard focus index for dropdown items\r\n  const [makkahFocus, setMakkahFocus] = useState(-1);\r\n  const [madinahFocus, setMadinahFocus] = useState(-1);\r\n\r\n  // --- close dropdowns when clicking outside ---\r\n  useEffect(() => {\r\n    function onDocClick(e) {\r\n      if (makkahRef.current && !makkahRef.current.contains(e.target)) {\r\n        setMakkahShowList(false);\r\n      }\r\n      if (madinahRef.current && !madinahRef.current.contains(e.target)) {\r\n        setMadinahShowList(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"click\", onDocClick);\r\n    return () => document.removeEventListener(\"click\", onDocClick);\r\n  }, []);\r\n\r\n  // ticket / pax / profit states\r\n  const [pax, setPax] = useState(1);\r\n  const [ticketPrice, setTicketPrice] = useState(0);\r\n  const [ticketCurrency, setTicketCurrency] = useState(\"SAR\");\r\n  // selected airline and vehicle lifted to parent so we can save them in package snapshot\r\n  const [selectedAirline, setSelectedAirline] = useState(null);\r\n  const [vehicle, setVehicle] = useState(\"CAR\");\r\n\r\n  // NEW: profit amount + currency\r\n  const [profit, setProfit] = useState(0);\r\n  const [profitCurrency, setProfitCurrency] = useState(\"SAR\");\r\n\r\n  const [rates, setRates] = useLocalStorage(\"umrah_rates\", {\r\n    SAR_to_PKR: 75,\r\n    USD_to_SAR: 3.75,\r\n  });\r\n\r\n  // keep default visa SAR (user can edit it)\r\n  const [defaultVisaSAR, setDefaultVisaSAR] = useLocalStorage(\r\n    \"umrah_defaultVisaSAR\",\r\n    300\r\n  );\r\n\r\n  // TRANSPORT total\r\n  const [transportTotal, setTransportTotal] = useState(0);\r\n\r\n  const [packages, setPackages] = useLocalStorage(\"umrah_packages\", []);\r\n\r\n  // -------------------------\r\n  // Load hotel lists\r\n  // -------------------------\r\n  const loadLists = async () => {\r\n    setLoadingHotels(true);\r\n    try {\r\n      const mList = await getMakkahHotels();\r\n      const mdList = await getMadinahHotels();\r\n      // ðŸ”´ FINAL SOURCE OF TRUTH: TripPlanner COUNTED data\r\n      try {\r\n        const rawPlan = localStorage.getItem(\"umrah_last_plan\");\r\n        if (rawPlan) {\r\n          const plan = JSON.parse(rawPlan);\r\n\r\n          const stays =\r\n            plan.adjustedStays ||\r\n            (plan.segments || []).filter((s) => s.type === \"stay\");\r\n\r\n          const sum = (arr) =>\r\n            arr.reduce((acc, s) => acc + Number(s.countedDays || 0), 0);\r\n\r\n          const makkahStays = stays.filter((s) => s.city === \"makkah\");\r\n          const madinahStays = stays.filter((s) => s.city === \"madinah\");\r\n\r\n          const sumWeekend = (arr) =>\r\n            arr.reduce(\r\n              (acc, s) =>\r\n                acc +\r\n                (Array.isArray(s.weekendDates) ? s.weekendDates.length : 0),\r\n              0\r\n            );\r\n\r\n          if (makkahStays.length) {\r\n            setMakkah((s) => ({\r\n              ...s,\r\n              nights: sum(makkahStays),\r\n              weekendNights: sumWeekend(makkahStays),\r\n            }));\r\n          }\r\n\r\n          if (madinahStays.length) {\r\n            setMadinah((s) => ({\r\n              ...s,\r\n              nights: sum(madinahStays),\r\n              weekendNights: sumWeekend(madinahStays),\r\n            }));\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn(\"Failed to read counted nights from umrah_last_plan\", e);\r\n      }\r\n\r\n      setMakkahList(mList || []);\r\n      setMadinahList(mdList || []);\r\n\r\n      if ((!makkah.name || makkah.name === \"\") && mList.length > 0) {\r\n        const first = mList[0];\r\n        setMakkah((s) => ({\r\n          ...s,\r\n          name: first.name,\r\n          pricePerNight: first.pricePerNight,\r\n        }));\r\n      }\r\n      if ((!madinah.name || madinah.name === \"\") && mdList.length > 0) {\r\n        const first = mdList[0];\r\n        setMadinah((s) => ({\r\n          ...s,\r\n          name: first.name,\r\n          pricePerNight: first.pricePerNight,\r\n        }));\r\n      }\r\n    } finally {\r\n      setLoadingHotels(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadLists();\r\n  }, []);\r\n\r\n  // ---------------------------------------------------\r\n  // Filters function (now accepts filters object)\r\n  // ---------------------------------------------------\r\n  function parseDistanceToMeters(dist) {\r\n    // expected formats: \"350m\", \"1.2 km\", \"1200 m\", \"0.5km\"\r\n    if (!dist) return null;\r\n    const s = String(dist).trim().toLowerCase();\r\n    const num = parseFloat(s.replace(\",\", \".\").replace(/[^\\d.]/g, \"\"));\r\n    if (s.includes(\"km\")) return Math.round(num * 1000);\r\n    if (s.includes(\"m\")) return Math.round(num);\r\n    // fallback treat as meters if numeric\r\n    if (!Number.isNaN(num)) return Math.round(num);\r\n    return null;\r\n  }\r\n\r\n  const filterHotels = (list, query, filters) => {\r\n    const q = (query || \"\").trim().toLowerCase();\r\n\r\n    // pre-calc numeric filters\r\n    const maxPrice =\r\n      filters && filters.maxPrice !== \"\" ? Number(filters.maxPrice) : null;\r\n    const maxDistance =\r\n      filters && filters.maxDistance !== \"\"\r\n        ? Number(filters.maxDistance)\r\n        : null;\r\n    const starFilter = filters && filters.star ? filters.star : \"all\";\r\n\r\n    let out = (list || []).filter((h) => {\r\n      // star filter\r\n      if (starFilter !== \"all\") {\r\n        if (String(h.stars) !== String(starFilter)) return false;\r\n      }\r\n\r\n      // price filter (if hotel has pricePerNight field)\r\n      if (\r\n        maxPrice !== null &&\r\n        h.pricePerNight !== undefined &&\r\n        h.pricePerNight !== \"\"\r\n      ) {\r\n        if (Number(h.pricePerNight) > maxPrice) return false;\r\n      }\r\n\r\n      // distance filter\r\n      if (maxDistance !== null && h.distance) {\r\n        const d = parseDistanceToMeters(h.distance);\r\n        if (d !== null && d > maxDistance) return false;\r\n      }\r\n\r\n      // query matching (name or distance)\r\n      if (!q) return true;\r\n      if (h.name && h.name.toLowerCase().includes(q)) return true;\r\n      if (h.distance && String(h.distance).toLowerCase().includes(q))\r\n        return true;\r\n      return false;\r\n    });\r\n\r\n    // sorting\r\n    if (filters && filters.sortBy && filters.sortBy !== \"relevance\") {\r\n      if (filters.sortBy === \"price\") {\r\n        out = out.sort(\r\n          (a, b) => Number(a.pricePerNight || 0) - Number(b.pricePerNight || 0)\r\n        );\r\n      } else if (filters.sortBy === \"distance\") {\r\n        out = out.sort((a, b) => {\r\n          const da = parseDistanceToMeters(a.distance) || 0;\r\n          const db = parseDistanceToMeters(b.distance) || 0;\r\n          return da - db;\r\n        });\r\n      } else if (filters.sortBy === \"stars\") {\r\n        out = out.sort((a, b) => Number(b.stars || 0) - Number(a.stars || 0));\r\n      }\r\n    }\r\n\r\n    return out;\r\n  };\r\n\r\n  const filteredMakkah = useMemo(\r\n    () => filterHotels(makkahList, makkahQuery, makkahFilters),\r\n    [makkahList, makkahQuery, makkahFilters]\r\n  );\r\n\r\n  const filteredMadinah = useMemo(\r\n    () => filterHotels(madinahList, madinahQuery, madinahFilters),\r\n    [madinahList, madinahQuery, madinahFilters]\r\n  );\r\n\r\n  // --- Keyboard + dropdown helpers (same as before) ---\r\n  useEffect(() => {\r\n    if (!makkahShowList) setMakkahFocus(-1);\r\n  }, [makkahShowList, filteredMakkah]);\r\n\r\n  useEffect(() => {\r\n    if (!madinahShowList) setMadinahFocus(-1);\r\n  }, [madinahShowList, filteredMadinah]);\r\n\r\n  function selectMakkahByIndex(i) {\r\n    const h = filteredMakkah[i];\r\n    if (!h) return;\r\n    setMakkah((s) => ({ ...s, name: h.name, pricePerNight: h.pricePerNight }));\r\n    setMakkahQuery(\r\n      `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`\r\n    );\r\n    setMakkahShowList(false);\r\n    setMakkahFocus(-1);\r\n  }\r\n\r\n  function selectMadinahByIndex(i) {\r\n    const h = filteredMadinah[i];\r\n    if (!h) return;\r\n    setMadinah((s) => ({ ...s, name: h.name, pricePerNight: h.pricePerNight }));\r\n    setMadinahQuery(\r\n      `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`\r\n    );\r\n    setMadinahShowList(false);\r\n    setMadinahFocus(-1);\r\n  }\r\n\r\n  function handleMakkahKeyDown(e) {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setMakkahShowList(true);\r\n      setMakkahFocus((prev) => {\r\n        if (filteredMakkah.length === 0) return -1;\r\n        if (prev === -1) return 0;\r\n        return Math.min(prev + 1, filteredMakkah.length - 1);\r\n      });\r\n      return;\r\n    }\r\n    if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setMakkahFocus((prev) => {\r\n        if (filteredMakkah.length === 0) return -1;\r\n        if (prev <= 0) return 0;\r\n        return prev - 1;\r\n      });\r\n      return;\r\n    }\r\n    if (e.key === \"Enter\") {\r\n      if (makkahFocus >= 0) {\r\n        e.preventDefault();\r\n        selectMakkahByIndex(makkahFocus);\r\n      }\r\n      return;\r\n    }\r\n    if (e.key === \"Escape\") {\r\n      setMakkahShowList(false);\r\n      setMakkahFocus(-1);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleMadinahKeyDown(e) {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setMadinahShowList(true);\r\n      setMadinahFocus((prev) => {\r\n        if (filteredMadinah.length === 0) return -1;\r\n        if (prev === -1) return 0;\r\n        return Math.min(prev + 1, filteredMadinah.length - 1);\r\n      });\r\n      return;\r\n    }\r\n    if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setMadinahFocus((prev) => {\r\n        if (filteredMadinah.length === 0) return -1;\r\n        if (prev <= 0) return 0;\r\n        return prev - 1;\r\n      });\r\n      return;\r\n    }\r\n    if (e.key === \"Enter\") {\r\n      if (madinahFocus >= 0) {\r\n        e.preventDefault();\r\n        selectMadinahByIndex(madinahFocus);\r\n      }\r\n      return;\r\n    }\r\n    if (e.key === \"Escape\") {\r\n      setMadinahShowList(false);\r\n      setMadinahFocus(-1);\r\n      return;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (makkahFocus >= 0) {\r\n      const el = document.getElementById(`makkah-item-${makkahFocus}`);\r\n      if (el) el.scrollIntoView({ block: \"nearest\" });\r\n    }\r\n  }, [makkahFocus]);\r\n\r\n  useEffect(() => {\r\n    if (madinahFocus >= 0) {\r\n      const el = document.getElementById(`madinah-item-${madinahFocus}`);\r\n      if (el) el.scrollIntoView({ block: \"nearest\" });\r\n    }\r\n  }, [madinahFocus]);\r\n\r\n  // price calculation\r\n  const makkahNights = Number(makkah.nights) || 0;\r\n  const makkahPrice = Number(makkah.pricePerNight) || 0;\r\n\r\n  const madinahNights = Number(madinah.nights) || 0;\r\n  const madinahPrice = Number(madinah.pricePerNight) || 0;\r\n\r\n  const makTotal = makkahNights * makkahPrice;\r\n  const madTotal = madinahNights * madinahPrice;\r\n\r\n  const ticketPriceInSAR =\r\n    ticketCurrency === \"USD\"\r\n      ? ticketPrice * rates.USD_to_SAR\r\n      : ticketCurrency === \"PKR\"\r\n      ? ticketPrice / rates.SAR_to_PKR\r\n      : ticketPrice;\r\n\r\n  const visaSAR = Number(defaultVisaSAR) || 0;\r\n\r\n  const _profit = Number(profit) || 0;\r\n  let profitInSAR = 0;\r\n  if (_profit > 0) {\r\n    if (profitCurrency === \"SAR\") {\r\n      profitInSAR = _profit;\r\n    } else if (profitCurrency === \"USD\") {\r\n      profitInSAR = _profit * Number(rates.USD_to_SAR || 3.75);\r\n    } else if (profitCurrency === \"PKR\") {\r\n      profitInSAR = _profit / Number(rates.SAR_to_PKR || 75);\r\n    }\r\n  }\r\n\r\n  const perPersonTotalSAR =\r\n    (Number(makTotal) || 0) +\r\n    (Number(madTotal) || 0) +\r\n    (Number(ticketPriceInSAR) || 0) +\r\n    (Number(visaSAR) || 0) +\r\n    (Number(transportTotal) || 0) +\r\n    (Number(profitInSAR) || 0);\r\n\r\n  const totalSAR = perPersonTotalSAR * Math.max(1, Number(pax || 1));\r\n  const totalPKR = totalSAR * Number(rates.SAR_to_PKR || 75);\r\n  const totalUSD = totalSAR / Number(rates.USD_to_SAR || 3.75);\r\n\r\n  // ---------------------------------------------------\r\n  // When user selects a hotel from dropdown (not used by new filters)\r\n  // ---------------------------------------------------\r\n  const handleSelectMakkah = (e) => {\r\n    const id = e.target.value;\r\n    const h = makkahList.find((x) => x.id === id);\r\n    if (h) {\r\n      setMakkah((s) => ({\r\n        ...s,\r\n        name: h.name,\r\n        pricePerNight: h.pricePerNight,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSelectMadinah = (e) => {\r\n    const id = e.target.value;\r\n    const h = madinahList.find((x) => x.id === id);\r\n    if (h) {\r\n      setMadinah((s) => ({\r\n        ...s,\r\n        name: h.name,\r\n        pricePerNight: h.pricePerNight,\r\n      }));\r\n    }\r\n  };\r\n\r\n  // ---------------------------------------------------\r\n  // SAVE PACKAGE (upgraded -> consolidated snapshot)\r\n  // ---------------------------------------------------\r\n  const savePackage = () => {\r\n    try {\r\n      // Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚº Ù¾ÛÙ„Û’ TripPlanner Ú©ÛŒ saved itinerary Ù„ÛŒÚº (Ø§Ú¯Ø± Ù…ÙˆØ¬ÙˆØ¯ ÛÙˆ)\r\n      let itinerary = null;\r\n      try {\r\n        const raw = localStorage.getItem(\"umrah_last_plan\");\r\n        if (raw) itinerary = JSON.parse(raw);\r\n      } catch (e) {\r\n        itinerary = null;\r\n      }\r\n\r\n      // build consolidated snapshot\r\n      const snapshot = {\r\n        // meta will be filled by packageService (id, createdAt)\r\n        agency: agency || null,\r\n        itinerary: itinerary || null,\r\n\r\n        hotelsSelected: {\r\n          makkah: { ...makkah },\r\n          madinah: { ...madinah },\r\n        },\r\n\r\n        flights: {\r\n          ticketPrice: ticketPrice || 0,\r\n          ticketCurrency: ticketCurrency || \"SAR\",\r\n          selectedAirline: selectedAirline || null, // â­ FIXED: airline saving\r\n        },\r\n\r\n        visa: {\r\n          visaSAR: Number(defaultVisaSAR || 0),\r\n          type: \"e-visa\", // â­ FIXED: always show e-visa\r\n        },\r\n\r\n        transport: {\r\n          transportTotal: Number(transportTotal || 0),\r\n          vehicle: vehicle || \"\", // â­ FIXED: vehicle saving\r\n        },\r\n\r\n        pax: Number(pax || 1),\r\n        profit: Number(profit || 0),\r\n        profitCurrency: profitCurrency || \"SAR\",\r\n\r\n        totals: {\r\n          SAR: Number(totalSAR || 0),\r\n          PKR: Number(totalPKR || 0),\r\n          USD: Number(totalUSD || 0),\r\n        },\r\n      };\r\n\r\n      // call packageService to save (it will add id + createdAt)\r\n      const saved = savePkgService(snapshot);\r\n      if (saved) {\r\n        // update local state (packages) so UI reflects saved package\r\n        setPackages((prev) => [saved, ...(prev || [])]);\r\n        alert(\"Package saved!\");\r\n      } else {\r\n        alert(\"Failed to save package. Check browser storage.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"savePackage error\", err);\r\n      alert(\"Saving failed. See console for error.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full min-h-screen bg-gray-100\">\r\n      <main className=\"w-full px-3 md:px-6 py-2\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-4\">\r\n          {/* LEFT PANEL */}\r\n          <aside className=\"lg:col-span-6 space-y-4\">\r\n            {/* Makkah Hotels */}\r\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border-l-4 border-pink-500\">\r\n              <h3 className=\"font-semibold text-lg mb-3\">Makkah Hotels</h3>\r\n\r\n              {/* Compact combined search + filters + Add */}\r\n              <div className=\"p-3 bg-gray-50 border rounded mb-3\">\r\n                <div\r\n                  className=\"relative flex flex-col gap-2 md:flex-row md:items-center\"\r\n                  ref={makkahRef}\r\n                >\r\n                  <input\r\n                    value={makkahQuery}\r\n                    onChange={(e) => {\r\n                      const q = e.target.value || \"\";\r\n                      setMakkahQuery(q);\r\n                      setMakkahShowList(true);\r\n                      const match =\r\n                        filteredMakkah.find(\r\n                          (h) =>\r\n                            `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` ===\r\n                            q.trim()\r\n                        ) || null;\r\n                      if (match) {\r\n                        setMakkah((s) => ({\r\n                          ...s,\r\n                          name: match.name,\r\n                          pricePerNight: match.pricePerNight,\r\n                        }));\r\n                        setMakkahShowList(false);\r\n                      }\r\n                    }}\r\n                    onKeyDown={(e) => {\r\n                      handleMakkahKeyDown(e);\r\n                      if (e.key === \"Enter\" && makkahFocus < 0) {\r\n                        const q = (makkahQuery || \"\").trim();\r\n                        const match =\r\n                          filteredMakkah.find(\r\n                            (h) =>\r\n                              `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` ===\r\n                              q\r\n                          ) ||\r\n                          filteredMakkah[0] ||\r\n                          null;\r\n                        if (match) {\r\n                          setMakkah((s) => ({\r\n                            ...s,\r\n                            name: match.name,\r\n                            pricePerNight: match.pricePerNight,\r\n                          }));\r\n                          setMakkahShowList(false);\r\n                        }\r\n                      }\r\n                    }}\r\n                    placeholder=\"Search & select hotel...\"\r\n                    className=\"w-full p-2 border rounded text-sm\"\r\n                    onFocus={() => setMakkahShowList(true)}\r\n                  />\r\n\r\n                  {/* Filters compact UI (before Add) */}\r\n                  <div className=\"flex flex-wrap gap-2 w-full md:w-auto\">\r\n                    <select\r\n                      value={makkahFilters.star}\r\n                      onChange={(e) =>\r\n                        setMakkahFilters((s) => ({\r\n                          ...s,\r\n                          star: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded text-sm bg-white\"\r\n                      title=\"Filter by stars\"\r\n                    >\r\n                      <option value=\"all\">All â˜…</option>\r\n                      <option value=\"5\">5â˜…</option>\r\n                      <option value=\"4\">4â˜…</option>\r\n                      <option value=\"3\">3â˜…</option>\r\n                      <option value=\"2\">2â˜…</option>\r\n                      <option value=\"1\">1â˜…</option>\r\n                    </select>\r\n\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Max price\"\r\n                      value={makkahFilters.maxPrice}\r\n                      onChange={(e) =>\r\n                        setMakkahFilters((s) => ({\r\n                          ...s,\r\n                          maxPrice: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded w-full md:w-24 text-sm\"\r\n                    />\r\n\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Max m\"\r\n                      value={makkahFilters.maxDistance}\r\n                      onChange={(e) =>\r\n                        setMakkahFilters((s) => ({\r\n                          ...s,\r\n                          maxDistance: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded w-full md:w-20 text-sm\"\r\n                    />\r\n\r\n                    <select\r\n                      value={makkahFilters.sortBy}\r\n                      onChange={(e) =>\r\n                        setMakkahFilters((s) => ({\r\n                          ...s,\r\n                          sortBy: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded text-sm bg-white\"\r\n                      title=\"Sort by\"\r\n                    >\r\n                      <option value=\"relevance\">Relevance</option>\r\n                      <option value=\"price\">Price â†‘</option>\r\n                      <option value=\"distance\">Distance â†‘</option>\r\n                      <option value=\"stars\">Stars â†“</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={() => setManagerOpen(true)}\r\n                    className=\"px-3 py-2 border rounded text-sm bg-white w-full md:w-auto md:ml-2\"\r\n                    type=\"button\"\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n\r\n                {/* dropdown results */}\r\n                {makkahShowList && filteredMakkah.length > 0 && (\r\n                  <div className=\"absolute left-0 right-0 mt-2 bg-white border rounded max-h-64 overflow-auto shadow z-30 md:left-0 md:right-auto md:min-w-[450px]\">\r\n                    {filteredMakkah.map((h, index) => (\r\n                      <button\r\n                        key={h.id || index}\r\n                        id={`makkah-item-${index}`}\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setMakkah((s) => ({\r\n                            ...s,\r\n                            name: h.name,\r\n                            pricePerNight: h.pricePerNight,\r\n                          }));\r\n                          setMakkahQuery(\r\n                            `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`\r\n                          );\r\n                          setMakkahShowList(false);\r\n                          setMakkahFocus(-1);\r\n                        }}\r\n                        onMouseEnter={() => setMakkahFocus(index)}\r\n                        className={`w-full text-left px-3 py-2 flex items-start gap-3 ${\r\n                          index === makkahFocus\r\n                            ? \"bg-indigo-50\"\r\n                            : \"hover:bg-gray-50\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-medium text-sm\">{h.name}</div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {h.stars}â˜… â€” {h.distance} â€” SAR {h.pricePerNight}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <HotelCard title=\"\" hotel={makkah} setHotel={setMakkah} />\r\n            </div>\r\n\r\n            {/* Madinah Hotels */}\r\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border-l-4 border-emerald-500\">\r\n              <h3 className=\"font-semibold text-lg mb-3\">Madinah Hotels</h3>\r\n\r\n              {/* Compact combined search + filters + Add */}\r\n              <div className=\"p-3 bg-gray-50 border rounded mb-3\">\r\n                <div\r\n                  className=\"relative flex flex-col gap-2 md:flex-row md:items-center\"\r\n                  ref={madinahRef}\r\n                >\r\n                  <input\r\n                    value={madinahQuery}\r\n                    onChange={(e) => {\r\n                      const q = e.target.value || \"\";\r\n                      setMadinahQuery(q);\r\n                      setMadinahShowList(true);\r\n                      const match =\r\n                        filteredMadinah.find(\r\n                          (h) =>\r\n                            `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` ===\r\n                            q.trim()\r\n                        ) || null;\r\n                      if (match) {\r\n                        setMadinah((s) => ({\r\n                          ...s,\r\n                          name: match.name,\r\n                          pricePerNight: match.pricePerNight,\r\n                        }));\r\n                        setMadinahShowList(false);\r\n                      }\r\n                    }}\r\n                    onKeyDown={(e) => {\r\n                      handleMadinahKeyDown(e);\r\n                      if (e.key === \"Enter\" && madinahFocus < 0) {\r\n                        const q = (madinahQuery || \"\").trim();\r\n                        const match =\r\n                          filteredMadinah.find(\r\n                            (h) =>\r\n                              `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}` ===\r\n                              q\r\n                          ) ||\r\n                          filteredMadinah[0] ||\r\n                          null;\r\n                        if (match) {\r\n                          setMadinah((s) => ({\r\n                            ...s,\r\n                            name: match.name,\r\n                            pricePerNight: match.pricePerNight,\r\n                          }));\r\n                          setMadinahShowList(false);\r\n                        }\r\n                      }\r\n                    }}\r\n                    placeholder=\"Search & select hotel...\"\r\n                    className=\"w-full p-2 border rounded text-sm\"\r\n                    onFocus={() => setMadinahShowList(true)}\r\n                  />\r\n\r\n                  {/* Filters UI */}\r\n                  <div className=\"flex flex-wrap gap-2 w-full md:w-auto\">\r\n                    <select\r\n                      value={madinahFilters.star}\r\n                      onChange={(e) =>\r\n                        setMadinahFilters((s) => ({\r\n                          ...s,\r\n                          star: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded text-sm bg-white\"\r\n                      title=\"Filter by stars\"\r\n                    >\r\n                      <option value=\"all\">All â˜…</option>\r\n                      <option value=\"5\">5â˜…</option>\r\n                      <option value=\"4\">4â˜…</option>\r\n                      <option value=\"3\">3â˜…</option>\r\n                      <option value=\"2\">2â˜…</option>\r\n                      <option value=\"1\">1â˜…</option>\r\n                    </select>\r\n\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Max price\"\r\n                      value={madinahFilters.maxPrice}\r\n                      onChange={(e) =>\r\n                        setMadinahFilters((s) => ({\r\n                          ...s,\r\n                          maxPrice: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded w-24 text-sm\"\r\n                    />\r\n\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Max m\"\r\n                      value={madinahFilters.maxDistance}\r\n                      onChange={(e) =>\r\n                        setMadinahFilters((s) => ({\r\n                          ...s,\r\n                          maxDistance: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded w-20 text-sm\"\r\n                    />\r\n\r\n                    <select\r\n                      value={madinahFilters.sortBy}\r\n                      onChange={(e) =>\r\n                        setMadinahFilters((s) => ({\r\n                          ...s,\r\n                          sortBy: e.target.value,\r\n                        }))\r\n                      }\r\n                      className=\"p-2 border rounded text-sm bg-white\"\r\n                      title=\"Sort by\"\r\n                    >\r\n                      <option value=\"relevance\">Relevance</option>\r\n                      <option value=\"price\">Price â†‘</option>\r\n                      <option value=\"distance\">Distance â†‘</option>\r\n                      <option value=\"stars\">Stars â†“</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={() => setManagerOpen(true)}\r\n                    className=\"ml-2 px-2 py-1 border rounded text-sm bg-white\"\r\n                    type=\"button\"\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n\r\n                {/* dropdown results */}\r\n                {madinahShowList && filteredMadinah.length > 0 && (\r\n                  <div className=\"absolute left-4 right-4 mt-16 bg-white border rounded max-h-64 overflow-auto shadow z-30 md:left-0 md:right-auto md:min-w-[450px]\">\r\n                    {filteredMadinah.map((h, index) => (\r\n                      <button\r\n                        key={h.id || index}\r\n                        id={`madinah-item-${index}`}\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setMadinah((s) => ({\r\n                            ...s,\r\n                            name: h.name,\r\n                            pricePerNight: h.pricePerNight,\r\n                          }));\r\n                          setMadinahQuery(\r\n                            `${h.name} â€” ${h.stars}â˜… â€” ${h.distance} â€” SAR ${h.pricePerNight}`\r\n                          );\r\n                          setMadinahShowList(false);\r\n                          setMadinahFocus(-1);\r\n                        }}\r\n                        onMouseEnter={() => setMadinahFocus(index)}\r\n                        className={`w-full text-left px-3 py-2 flex items-start gap-3 ${\r\n                          index === madinahFocus\r\n                            ? \"bg-indigo-50\"\r\n                            : \"hover:bg-gray-50\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-medium text-sm\">{h.name}</div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {h.stars}â˜… â€” {h.distance} â€” SAR {h.pricePerNight}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <HotelCard title=\"\" hotel={madinah} setHotel={setMadinah} />\r\n            </div>\r\n          </aside>\r\n\r\n          {/* RIGHT PANEL */}\r\n          <div className=\"lg:col-span-6 space-y-4\">\r\n            <TicketsVisa\r\n              pax={pax}\r\n              setPax={setPax}\r\n              ticketPrice={ticketPrice}\r\n              setTicketPrice={setTicketPrice}\r\n              ticketCurrency={ticketCurrency}\r\n              setTicketCurrency={setTicketCurrency}\r\n              defaultVisaSAR={defaultVisaSAR}\r\n              setDefaultVisaSAR={setDefaultVisaSAR}\r\n              transportTotal={transportTotal}\r\n              setTransportTotal={setTransportTotal}\r\n              rates={rates}\r\n              setRates={setRates}\r\n              profit={profit}\r\n              setProfit={setProfit}\r\n              profitCurrency={profitCurrency}\r\n              setProfitCurrency={setProfitCurrency}\r\n              selectedAirline={selectedAirline}\r\n              setSelectedAirline={setSelectedAirline}\r\n              vehicle={vehicle}\r\n              setVehicle={setVehicle}\r\n            />\r\n\r\n            <Summary\r\n              perPersonTotalSAR={perPersonTotalSAR}\r\n              totalSAR={totalSAR}\r\n              totalPKR={totalPKR}\r\n              totalUSD={totalUSD}\r\n              pax={pax}\r\n              savePackage={savePackage}\r\n            />\r\n\r\n            <SavedPackages packages={packages} setPackages={setPackages} />\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n\r\n      {/* HOTEL MANAGER MODAL */}\r\n      <HotelManager\r\n        open={managerOpen}\r\n        setOpen={setManagerOpen}\r\n        makkahList={makkahList}\r\n        madinahList={madinahList}\r\n        refreshMakkah={loadLists}\r\n        refreshMadinah={loadLists}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}